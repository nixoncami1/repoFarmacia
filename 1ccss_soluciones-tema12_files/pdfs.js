/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1471295928 */
/* public/javascripts/4gen.js @ 1471295928 */
init_4gen=function(){var t;"undefined"!=typeof jQuery&&(t=jQuery);var e,n=3,i=8,r="/images/4gen/trans_1x1.gif",o=30,s=315,a=1,c=2,l=3,u=12;window.console||(window.console={log:function(){}});var d=function(){function d(){}function h(t,e){t.prototype.addEvent=d.prototype.addEvent,t.prototype.removeEvent=d.prototype.removeEvent,t.prototype.fireEvent=d.prototype.fireEvent,t.prototype.initEventHelper=d.prototype.initEventHelper,t.prototype.possibleEvents=e}function p(t,e,n,i,r,o){this.id=t,this.shortstyle=e,this.family=n,this.fallback=i,this.weight=r,this.style=o}function f(t){this.fonts=[],this.docManager=t,this._cssRuleQueue=[],this._fontLoadQueue=[]}function _(t,e){this.pages=[],this.loaded=!1,this.fonts={},this.numFonts=0,this.fontLoader=e,this.groupNum=t||0}function g(t){for(var e in this._defaultParams)this._defaultParams.hasOwnProperty(e)&&(this[e]=t[e]||this._defaultParams[e]);for(var n=0;n<this._requiredParams.length;n++){var i=this._requiredParams[n];if(!this[i])throw"Missing required Page param: "+i}if(!this.contentUrl&&!this.innerPageElem)throw"Must initialize a page with either a contentUrl or innerPageElem element";if(this.containerElem.boundToPageObj===!0)throw"Container Elem is already bound to a page.  We shouldn't get here";this.containerElem.boundToPageObj=!0,this._targetWidth=null,this._innerPageVisible=!!this.innerPageElem,this._imagesTurnedOn=!1,this.boundingRect=null,this.isVisible=!1,this.displayDirty=!0,this.displayOn=null,this.loadHasStarted=!!this.innerPageElem}function m(){this.initEventHelper(),this.viewRect=null,this.enabled=!1;var t=this;this._scrollCallback=function(){t._eventHandler("scroll")},this._resizeCallback=function(){t._eventHandler("resize")}}function v(){}function y(e,n,i){"undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),t("html, body").animate({scrollTop:t(e).offset().top},{queue:!1,duration:n,easing:"linear",complete:i})}function b(){this._name="book",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function w(){this._name="slideshow",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function k(){this._name="scroll";var t=this;this._verticalPositionChangeCallback=function(){t.checkAndUpdateVisiblePages()},this._fullscreenResizedCallback=function(){t._fullscreenResized()}}function x(e,n,i){this.options=i||{},this.options.extrasWidth=this.options.extrasWidth||s,this.defaultViewMode=e||"scroll",this.mobile=n||!1,t&&(this.view_manager_deferred=t.Deferred()),this.initEventHelper(),this.pages={},this._pageWidths=null,this._fontLoader=new f(this),this.viewManagers={scroll:new k,slideshow:new w,book:new b},this.viewportManager=new m,this._currentFontAggregatorHostIdx=0,this.visiblePages=[],this.firstVisiblePage=null,this.lastVisiblePage=null,this.currentFontGroup=new _(0,this._fontLoader),this.isScrolling=!1,this._scrollingCount=0}function S(t,e,n){return Math.min(n,Math.max(e,t))}function C(t){return Math.floor(100*t)/100}var T={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode:function(t){var e,n,i,r,o,s,a,c="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)r=this._keyStr.indexOf(t.charAt(l++)),o=this._keyStr.indexOf(t.charAt(l++)),s=this._keyStr.indexOf(t.charAt(l++)),a=this._keyStr.indexOf(t.charAt(l++)),e=r<<2|o>>4,n=(15&o)<<4|s>>2,i=(3&s)<<6|a,c+=String.fromCharCode(e),64!=s&&(c+=String.fromCharCode(n)),64!=a&&(c+=String.fromCharCode(i));return c=T._utf8_decode(c)},_utf8_decode:function(t){for(var e="",n=0,i=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return e}};d.prototype.initEventHelper=function(){this.eventListenerEnabled=!0,this.eventListeners={};for(var t=0;t<this.possibleEvents.length;t++)this.eventListeners[this.possibleEvents[t]]={}},d.prototype.addEvent=function(t,e){if(!this.eventListeners[t])throw t+" is not a valid type of event";this.eventListeners[t].next_uid||(this.eventListeners[t].next_uid=1),e._event_listener_uid||(e._event_listener_uid=this.eventListeners[t].next_uid,this.eventListeners[t].next_uid++),this.eventListeners[t][e._event_listener_uid]=e},d.prototype.removeEvent=function(t,e){delete this.eventListeners[t][e._event_listener_uid]},d.prototype.fireEvent=function(t){function e(t){t.apply(o,i)}if(this.eventListenerEnabled){var n=this.eventListeners[t],i=[];if(arguments.length>1){i[arguments.length-2]=null;for(var r=1;r<arguments.length;r++)i[r-1]=arguments[r]}var o=this;for(var s in n)"next_uid"!=s&&n.hasOwnProperty(s)&&e(n[s])}};var E="font_preload_bed",D=function(){return document.styleSheets[0]&&!document.styleSheets[0].insertRule},M=function(t){return t%1==0},P=function(t,e){if(D()){var n=t.innerHTML;t.href=e,t.innerHTML!=n&&(t.innerHTML=n)}else t.href=e},N=function(){var t=navigator.userAgent.toLowerCase();return t.search("android 2.2")>-1}(),$=function(){var t=navigator.userAgent.toLowerCase();return t.search("mobile")>-1&&t.search("safari")>-1&&!N}(),A=navigator.userAgent.indexOf("AppleWebKit/")>-1;e=function(){return D()?a:$?c:c}(),D()&&(i=5,n=2),N&&(i=1,n=1),p.prototype.eotCssRule=function(t){var e="src: url("+t+this.family+".eot); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.ttfCssRule=function(t){var e="src: url("+t+this.family+".ttf) format('truetype'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.svgCssRule=function(t){var e="src: url("+t+"#"+this.family+") format('svg'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.createPreloadElem=function(){return"<span style='font-family: "+this.family+"'>scribd.</span> "},f.prototype._makeNewStyleBlock=function(){var t=document.createElement("style");window.createPopup||t.appendChild(document.createTextNode(""));var e=document.getElementsByTagName("head")[0];return e.appendChild(t),t},f.prototype._insertCssRule=function(t){this._cssRuleQueue.push(t)},f.prototype._flushCssRuleQueue=function(t){if(this._cssRuleQueue.length>0){var e=t&&document.getElementById(t)||this._makeNewStyleBlock(),n=this._cssRuleQueue.join("\n");D()?e.styleSheet.cssText=n:window.createPopup?e.innerHTML=n:e.appendChild(document.createTextNode(n)),this._cssRuleQueue=[]}},f.prototype.getFontAggregatorHostForFonts=function(t){for(var n=[],i=0;i<t.length;i++)n.push(t[i].shortstyle+t[i].id);n.sort();var r=this.docManager.nextFontAggregatorHost()+"/"+this.docManager.assetPrefix+"/"+n.join(",")+"/"+u+"/";switch(e){case a:break;case c:N||(r+="ttfs.css");break;case l:r+="fonts.svg"}return r},f.prototype._addTTFRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.ttfCssRule(e))}},f.prototype._addSVGRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.svgCssRule(e))}},f.prototype._addEOTRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.eotCssRule(e))}},f.prototype._nextPreloadId=function(){this._preloadId||(this._preloadId=0);var t="preload_bed"+this._preloadId;return this._preloadId+=1,t},f.prototype._addCSSWebkit=function(t,e){function n(){{var t=document.createElement("div");i._nextPreloadId()}t.innerHTML=s;var n=document.getElementById(E),o=window.setInterval(function(){r.contentDocument.styleSheets.length>0&&(window.clearInterval(o),r.contentDocument.body.getBoundingClientRect(),n.appendChild(t),window.setTimeout(function(){r.contentDocument.body.getBoundingClientRect(),i._addCSSLink(e)},500))},0)}var i=this,r=document.createElement("iframe"),o=this._nextPreloadId();r.id=o;for(var s="",a=0;a<t.length;a++){var c=t[a];s+=c.createPreloadElem()}this._makeNewStyleBlock();r.addEventListener("load",function(){n()},!1),r.style.display="none",document.body.appendChild(r),r.contentDocument.body.innerHTML=s;var l=r.contentDocument.createElement("link");l.href=e,l.rel="stylesheet",l.type="text/css",l.media="screen";var u=r.contentDocument.getElementsByTagName("head")[0];u.appendChild(l)},f.prototype._addCSSLink=function(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",e.type="text/css";var n=document.getElementsByTagName("head")[0];n.appendChild(e)},f.prototype.flushFontQueue=function(){if(0!==this._fontLoadQueue.length&&"rasterize"!=this.docManager.displayType){var t=this._fontLoadQueue;this._fontLoadQueue=[];var n=this.getFontAggregatorHostForFonts(t);switch(e){case a:this._addEOTRules(t,n);break;case c:N?this._addTTFRules(t,n):A?this._addCSSWebkit(t,n):this._addCSSLink(n);break;case l:this._addSVGRules(t,n)}this._flushCssRuleQueue()}},f.prototype.addFontToQueue=function(t){var e=this.fonts[t];e._loadQueued||(e._loadQueued=!0,this._fontLoadQueue.push(e))},f.prototype.addFont=function(t,e,n,i,r,o){var s=new p(t,e,n,i,r,o);this.fonts[t]=s},f.prototype.setNumFonts=function(t){for(var e=0;t>e;e++)this.fonts[e]=new p(e,"","ff"+e,"sans-serif","normal","normal")},f.prototype._initHidersCSS=function(){for(var t=[],e=0;e<this.fonts.length;e++)t.push("."+this.fonts[e].family);this._insertCssRule(t.join(", ")+" {display: none;}\n")},f.prototype._initFamilyCSS=function(){for(var t=0;t<this.fonts.length;t++){var e=this.fonts[t].family,n=this.fonts[t].fallback,i=this.fonts[t].weight,r=this.fonts[t].style,o="div."+e+" span";"undefined"!=typeof scribd&&"undefined"!=typeof scribd.embed_div_id&&(o="#"+scribd.embed_div_id+" "+o),this._insertCssRule(D()?o+" {font-family: "+e+" !important;\n}":o+" {font-family: "+e+", "+n+"; font-weight: "+i+"; font-style: "+r+";\n}")}},f.prototype.initStyles=function(){if("rasterize"!=this.docManager.displayType){switch(this._initFamilyCSS(),e){case a:break;case c:N||this._initHidersCSS();break;case l:}this._flushCssRuleQueue("preload_styler")}},f.prototype.setupTestElements=function(){if(e==c&&!A&&"rasterize"!=this.docManager.displayType){for(var t="",n=0;n<this.fonts.length;n++){var i=this.fonts[n];t+=i.createPreloadElem()}var r=document.getElementById(E);r.innerHTML=t,document.body.appendChild(r),this._insertCssRule("#"+E+" span {display: block; visibility: hidden}"),this._flushCssRuleQueue()}},_.prototype.addPage=function(t){for(var e=0;e<t.fonts.length;e++){var n=t.fonts[e];void 0===this.fonts[n]&&(this.fonts[n]=!0,this.numFonts+=1)}this.pages.push(t)},_.prototype.isFull=function(){var t=this.pages.length,n=this.groupNum,r=this.numFonts;return e==a?this.hasLoaded||r>50||r>=20&&(0===n&&t>=i+3||t>=15):e==l||N?this.hasLoaded||r>=5&&t>=i:this.hasLoaded||r>100||r>=20&&(0===n&&t>=i+3||t>=100)},_.prototype.load=function(t){function e(){for(var t in n.fonts)n.fonts.hasOwnProperty(t)&&n.fontLoader.addFontToQueue(t);n.fontLoader.flushFontQueue()}if(!this.hasLoaded){this.hasLoaded=!0;var n=this;t?window.setTimeout(function(){e()},t):e()}},_.prototype.newNextGroup=function(){return new _(this.groupNum+1,this.fontLoader)};var O=1,I=2,R=3,j=4,L=function(){return void 0!==document.documentElement.style.WebkitTransform?O:void 0!==document.documentElement.style.MozTransform?I:void 0!==document.documentElement.style.OTransform?j:R}();g.prototype._defaultParams={containerElem:null,innerPageElem:null,contentUrl:null,origWidth:null,origHeight:null,fonts:null,docManager:null,pageNum:null},g.prototype._requiredParams=["origWidth","origHeight","fonts","docManager","containerElem","pageNum"],g.prototype._updateBoundingRect=function(){var t,e,n,i;if(this.containerElem.getBoundingClientRect&&this.docManager.viewportManager.viewRect){var r=this.containerElem.getBoundingClientRect(),o=this.docManager.viewportManager.viewRect;e=r.left+o.left,t=r.top+o.top,o.offsetX&&(e-=o.offsetX),o.offsetY&&(t-=o.offsetY),n=r.right-r.left,i=r.bottom-r.top,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}}else t=this.containerElem.offsetTop,e=this.containerElem.offsetLeft,n=this.containerElem.offsetWidth,i=this.containerElem.offsetHeight,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}},g.prototype._setContainerContents=function(e){var n=/<noscript *><img[^<>]*\/><\/noscript *>/g,i=t(e.replace(n,""))[0];this.containerElem.appendChild(i);this.innerPageElem=i,this.turnOnLinks(),this.turnOnImages(),this.fixSVGFonts(),this.displayDirty=!0,this.displayOn?this.display():this.hide()},g.prototype.fixSVGFonts=function(){if(this._svgFontsFixed)throw"Already fixed the svg fonts";if(this.innerPageElem){if($){var t=function(e){if(e.nodeType==document.TEXT_NODE){var n=e.textContent.search(/[  \n][^ \n ]/);n>=0&&t(e.splitText(n+1))}else for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r])},e=function(t){for(var n=t.childNodes,i=0;i<n.length;i++){var r=n[i];if(r.nodeType==document.ELEMENT_NODE)e(r);else{var o=n[i+1];o&&"#text"==o.nodeName&&t.insertBefore(document.createElement("span"),o)}}};t(this.innerPageElem),e(this.innerPageElem)}this._svgFontsFixed=!0}},g.prototype.imagePageContent=function(t){return str="<img src='"+t+"'></img>"},g.prototype.load=function(){if(this.currentlyLoading=!0,this.loadHasStarted=!0,this.innerPageElem)throw"We already have loaded this page, but it looks like you called loadPage again";this.loadFonts();var e="page"+this.pageNum+"_callback";if(window[e])try{delete window[e]}catch(n){window[e]=void 0}if("rasterize"==this.docManager.displayType)return delete this.currentlyLoading,void this._setContainerContents(this.imagePageContent(this.contentUrl));var i=document.createElement("script"),r=this;window[e]=function(n){document.body.removeChild(i);var o=n[0];delete r.currentlyLoading,r._setContainerContents(o),"undefined"!=typeof t&&($container=t("#"+r.containerElem.id),skip_blur=Scribd.eligible_for_archive_blur_test&&(document.referrer.match(/google|bing|yahoo/i)||window.location.hash.match(/\bscribd\b/))&&"control"!=(Scribd.nway_test_choice_value("archive_blur")||"control"),!skip_blur&&$container.hasClass("blurred_page")&&r.docManager.doDynamicBlurring(r.containerElem.id)),r.docManager.fireEvent("pageLoaded",r.containerElem);try{delete window[e]}catch(s){window[e]=void 0}},i.src=this.contentUrl,i.type="text/javascript",i.charset="UTF-8",document.body.appendChild(i)},g.prototype.remove=function(){if(this.innerPageElem){var t=this.innerPageElem.parentNode;t.removeChild(this.innerPageElem),delete this.innerPageElem,delete this.currentLoading,delete this.loadHasStarted,this._linksTurnedOn=!1,this._imagesTurnedOn=!1,this._svgFontsFixed=!1}},g.prototype.display=function(t,e){if((!this.displayOn||this.displayDirty)&&(this.displayOn=!0,!this.currentlyLoading)){if(!this.innerPageElem)return this.loadHasStarted?void 0:t?void this.load():void 0;this.displayDirty=!1,e||(this._linksTurnedOn||this.turnOnLinks(),this._imagesTurnedOn||this.turnOnImages(),this._svgFontsFixed||this.fixSVGFonts()),this.loadFonts(),this._innerPageVisible||(this.containerElem.className=this.containerElem.className.replace(/placeholder|not_visible/g,""),this._innerPageVisible=!0,e||(this._fitContentsToWidth(),this.innerPageElem.style.display="block"))}},g.prototype.hide=function(){(this.displayOn||this.displayDirty)&&(this.displayOn=!1,this.innerPageElem&&(this.displayDirty=!1,this.containerElem.className=this.containerElem.className+" not_visible",this._innerPageVisible=!1,this.innerPageElem.style.display="none"))},g.prototype.setLoadFontGroup=function(t){t.addPage(this),this.loadFontGroup=t},g.prototype.loadFonts=function(){this.loadFontGroup.load()};var F=!!(document.all&&/msie 6./i.test(navigator.appVersion)&&window.ActiveXObject);return g.prototype._setZoomScale=function(t){var e=this.innerPageElem;switch(L){case O:e.style.WebkitTransform="scale("+t+")",e.style.WebkitTransformOrigin="top left";break;case I:e.style.MozTransform="scale("+t+")",e.style.MozTransformOrigin="top left";break;case j:e.style.OTransform="scale("+t+")",e.style.OTransformOrigin="top left";break;case R:if(e.originalZoom||(e.originalZoom="normal"==e.currentStyle.zoom?1:parseFloat(e.currentStyle.zoom)/100,F&&!this.docManager._isEmbed&&(e.originalZoom*=1.35)),e.style.zoom=e.originalZoom*t*100+"%",F){var n=this.innerPageElem;setTimeout(function(){n.style.marginLeft=""===n.style.marginLeft?0:""},500)}break;default:throw"Unknown scale method "+L}},g.prototype._fitContentsToWidth=function(){if(this._targetWidth&&this.innerPageElem&&this._innerPageVisible){var t=this._targetWidth/this.origWidth;this._setZoomScale(t),this._targetWidth=null}},g.prototype.setWidth=function(t){var e=Math.ceil(t/this.origWidth*this.origHeight);this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},g.prototype.setBounds=function(t,e){this.origWidth/this.origHeight>t/e?e=Math.ceil(t/this.origWidth*this.origHeight):t=Math.ceil(e/this.origHeight*this.origWidth),this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},g.prototype.turnOnImages=function(){if(!this.innerPageElem)throw"Can't turn on images for a page that's not loaded";if(this._imagesTurnedOn)throw"Images have already been turned on for this document";this._imagesTurnedOn=!0;for(var t=this.innerPageElem.getElementsByTagName("img"),e=0;e<t.length;e++){var n=t[e];if(n.className.toLowerCase().search("absimg")>-1&&!n.src){var i=this.docManager.subImageSrc(n.getAttribute("orig"));this.docManager.enablePNGHack?(n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale')",n.src=r):n.src=i,n.removeAttribute("orig"),n.style.display="block"}}},g.prototype.turnOnLinks=function(){if(!this.innerPageElem)throw"Can't turn on links for a page that's not loaded";if(this._linksTurnedOn)throw"Links have already been turned on for this document";this._linksTurnedOn=!0;for(var t=this.docManager,e=function(e){return function(){t.gotoPage(e.substring(4))}},n=this.innerPageElem.getElementsByTagName("a"),i=0;i<n.length;i++){var r=n[i];if(r.className.toLowerCase().search("ll")>-1&&!r.href){var o=r.getAttribute("orig");if(o){var s=T.decode(o).replace(/^j[\W]*a[\W]*v[\W]*a[\W]*s[\W]*c[\W]*r[\W]*i[\W]*p[\W]*t[\W]*:|^f[\W]*i[\W]*l[\W]*e[\W]*:/gi,"");s.search(/^page/)>-1?r.onclick=e(s):(s.search(/^mailto:/)>=0||s.search(/^(http|ftp)/)<0&&(s="http://"+s),r.target="_blank",P(r,s),r.rel="nofollow")}}}},h(m,["vertical","horizontal","either","resize"]),m.prototype._makeViewRect=function(){var t=this.container,e=document.documentElement,n=t.scrollTop||t.scrollY||t.pageYOffset||e.scrollTop,i=t.scrollLeft||t.scrollX||t.pageXOffset||e.scrollLeft,r=t.clientWidth||t.innerWidth||e.clientWidth,o=t.clientHeight||t.innerHeight||e.clientHeight,s=i+r,a=n+o,c={top:n,left:i,right:s,bottom:a,width:r,height:o};if(this.container!=window){var l=this.container.getBoundingClientRect&&this.container.getBoundingClientRect();l&&(c.offsetX=l.left,c.offsetY=l.top)}return c},m.prototype._updateViewRect=function(){var t=this.viewRect;this.viewRect=this._makeViewRect();var e=!t||t.left!=this.viewRect.left||t.width!=this.viewRect.width,n=!t||t.top!=this.viewRect.top||t.height!=this.viewRect.height;return{xChanged:e,yChanged:n}},m.prototype._eventHandler=function(t){var e=this._updateViewRect();"resize"!=t&&"both"!=t||!e.xChanged&&!e.yChanged||this.fireEvent("resize",this.viewRect),(e.xChanged||e.yChanged)&&this.fireEvent("either",this.viewRect),e.xChanged&&this.fireEvent("horizontal",this.viewRect),e.yChanged&&this.fireEvent("vertical",this.viewRect)},m.prototype.enable=function(){if(this.enabled)throw"ViewportManager has already been enabled";if(this.enabled=!0,this.container=x.scrollParent||window,this._eventHandler("both"),window.addEventListener){this.container.addEventListener("resize",this._resizeCallback,!1);var t=x.scrollParent?this.container:window.document;t.addEventListener("scroll",this._scrollCallback,!1)}else window.attachEvent&&(this.container.attachEvent("onresize",this._resizeCallback),this.container.attachEvent("onscroll",this._scrollCallback))},m.prototype.disable=function(){if(!this.enabled)throw"ViewportManager has already been disabled";this.enabled=!1,this.container.removeEventListener?(window.removeEventListener("resize",this._resizeCallback,!1),this.container.removeEventListener("scroll",this._scrollCallback,!1)):window.detatchEvent&&(window.detatchEvent("onresize",this._resizeCallback),this.container.detatchEvent("onscroll",this._scrollCallback))},v.prototype.name=function(){return this._name},v.prototype.register=function(t,e){if(this.registered)throw"This ViewManager is already registered";this.registered=!0,this.documentManager=t,this.viewportManager=e,this._currentPageWidth=defaultViewWidth,this._currentZoomMultiplier=1,this._updatePageWidths();var n=this.documentManager.firstVisiblePage;this._register(t,e),n&&this.documentManager.gotoPage(n.pageNum,{}),t.view_manager_deferred&&t.view_manager_deferred.resolve(t)},v.prototype._zoomedPageWidth=function(){return this._currentPageWidth*this._currentZoomMultiplier},v.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth())},v.prototype.isTopPageInView=function(){return!0},v.prototype._register=function(){},v.prototype.unregister=function(){if(!this.registered)throw"This ViewManager is already unregistered";this.isFullscreen&&this.exitFullscreen(),this._checkBodyWidth(),this._unregister(),this.registered=!1,delete this.documentManager,delete this.viewportManager},v.prototype._unregister=function(){},v.prototype._pagingStep=function(){return 1},v.prototype.gotoPage=function(t,e){if(!this.registered)throw"ViewManager must be registerd to call gotoPage";this._gotoPage(t,e)},v.prototype._gotoPage=function(){},v.prototype._fireHideExtras=function(){this.documentManager._fireHideExtras(),this._extrasHidden=!0},v.prototype._fireShowExtras=function(){this.documentManager._fireShowExtras(),this._extrasHidden=!1},v.prototype.enterFullscreen=function(){if(this.isFullscreen)throw"Fullscreen is already set";this._checkBodyWidth(),this.viewportManager.addEvent("resize",this._fullscreenResizedCallback),this._fireHideExtras(),this.resetZoom(),this._enterFullscreen(),this._fullscreenResized(this.viewportManager.viewRect),this._currentPageWidth=this.viewportManager.viewRect.width,this.isFullscreen=!0;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireEnteredFullscreen()},v.prototype.exitFullscreen=function(){if(!this.isFullscreen)throw"Fullscreen is not set";this.viewportManager.removeEvent("resize",this._fullscreenResizedCallback),this._fireShowExtras(),this.resetZoom(),this._exitFullscreen(),this.isFullscreen=!1;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireExitedFullscreen()},v.prototype._viewBarWidth=function(){return this._extrasHidden?0:this.documentManager.options.extrasWidth},v.prototype._enterFullscreen=function(){},v.prototype._exitFullscreen=function(){},v.prototype._fullscreenResized=function(){},v.prototype._scrollWithZoom=function(t,e){window.scrollTo(0,t.top*e)},v.prototype.zoom=function(t){var e=this.viewportManager.viewRect;e&&(this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.documentManager.setIsScrolling(!0),this._scrollWithZoom(e,t),this._zoomed(),this.documentManager.setIsScrolling(!1),this.documentManager._fireZoomed(t))},v.prototype._zoomed=function(){},v.prototype.resetZoom=function(){this._currentZoomMultiplier=1,this._checkBodyWidth(),this._updatePageWidths(),this._zoomed()},v.prototype._checkBodyWidth=function(){if(!x.scrollParent&&0!=x.updateBodyWidth){var t=document.documentElement.clientWidth,e=this._zoomedPageWidth()+this._viewBarWidth()+10;globalHeader=document.getElementById("global_header"),e>t?(document.body.style.width=e+"px",globalHeader&&(globalHeader.style.width=t+"px")):(document.body.style.width="100%",globalHeader&&(globalHeader.style.width="100%"))}},b.prototype=new v,b.prototype._register=function(){this._prepareDisplay()},b.prototype._unregister=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).removeClass("book_view"),n.containerElem.style.display=""}},b.prototype._prepareDisplay=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).addClass("book_view"),n.containerElem.style.display="none",n.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},b.prototype._zoomed=function(){this.documentManager.pages[this.currentPageId]},b.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth()/2)},b.prototype._pagingStep=function(){return 2},b.prototype._showPage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!0,e.display(!0),e.containerElem.style.display="")},b.prototype._hidePage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())},b.prototype._gotoPage=function(t){t=parseInt(t,10),t%2==1&&(t-=1);var e=null,n=null;"number"==typeof this.currentPageId&&(this._hidePage(this.currentPageId),this._hidePage(this.currentPageId+1)),e=this.documentManager.pages[t],n=this.documentManager.pages[t+1],(e||n)&&(this.currentPageId=t,this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),this._showPage(t),this._showPage(t+1),this.documentManager.visiblePagesChanged())},b.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},b.prototype._fullscreenResized=function(t){this._setWidth(t.width-o)},b.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,y(this.documentManager.pages[this.currentPageId].containerElem,300)},b.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},w.prototype=new v,w.prototype._register=function(){this._prepareDisplay();var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="hidden",t.style.height="100%")},w.prototype._unregister=function(){var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="visible",t.style.height="auto")},w.prototype._prepareDisplay=function(){for(var t in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(t)){var e=this.documentManager.pages[t];e.containerElem.style.display="none",e.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},w.prototype._setPageBounds=function(t){var e=this.documentManager.pages[this.currentPageId];e&&e.setBounds(t.width,t.height)},w.prototype._gotoPage=function(t){if(this.documentManager.pages.hasOwnProperty(t)){var e;this.currentPageId&&(e=this.documentManager.pages[this.currentPageId],e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())),this.currentPageId=t,e=this.documentManager.pages[t],this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),e.isVisible=!0,e.display(!0),e.containerElem.style.display="",e._updateBoundingRect(),this.documentManager.visiblePagesChanged()}},w.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},w.prototype._fullscreenResized=function(t){this._setPageBounds(t)},w.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,y(this.documentManager.pages[this.currentPageId].containerElem,300)},w.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},k.prototype=new v,k.prototype._updateInViewport=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=t.isVisible;return t.isVisible=e&&n?n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top:!1,this.adjacentVisiblePages=2,i!=t.isVisible},k.prototype.checkAndUpdateVisiblePages=function(){var t=!1;for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e],i=this._updateInViewport(n);t=t||i}t?this.documentManager.visiblePagesChanged():this.documentManager.scheduleLogPageView(),this._updateDisplayOnPages()},k.prototype._updateDisplayOnPages=function(){if(this.documentManager.firstVisiblePage&&this.documentManager.lastVisiblePage){var t=this.documentManager.firstVisiblePage.pageNum-this.adjacentVisiblePages,e=this.documentManager.lastVisiblePage.pageNum+this.adjacentVisiblePages;for(var n in this.pages)if(this.pages.hasOwnProperty(n)){var i=this.pages[n];i&&(i.pageNum>=t&&i.pageNum<=e?i.display():(i.hide(),this.documentManager.fireEvent("pageHide",i)))}}},k.prototype._zoomed=function(){this.checkAndUpdateVisiblePages()},k.prototype._register=function(t){this.pages=t.pages,this.viewportManager.addEvent("vertical",this._verticalPositionChangeCallback);for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];n.containerElem.style.display=""}this.documentManager.setPageMissingModulesVisible(!0),this.documentManager._updatePageBoundingRects(),this.checkAndUpdateVisiblePages()},k.prototype.isTopPageInView=function(){var t=this.documentManager.firstVisiblePage;return t?this.documentManager._expectedFirstPageNum>t.pageNum?!0:t.boundingRect.top+5>=this.viewportManager.viewRect.top:!0},k.prototype._unregister=function(){this.viewportManager.removeEvent("vertical",this._verticalPositionChangeCallback),delete this.pages},k.prototype._gotoPage=function(t,e){if(e=e||{},this.pages.hasOwnProperty(t)){var n=this.documentManager.pages[t];this.documentManager.setIsScrolling(!0);var i=this.documentManager.viewportManager.container;return n._updateBoundingRect(),i==window?scrollTo(n.boundingRect.left,n.boundingRect.top-(e.offset||0)):i.scrollTop=n.boundingRect.top-(e.offset||0),this.documentManager.setIsScrolling(!1),this.documentManager.isScrolling||this.documentManager.visiblePagesChanged(),n.pageNum}},k.prototype._gotoNextPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum+1,{direction:1})},k.prototype._gotoPreviousPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum-1,{direction:-1})},k.prototype._setWidth=function(t){var e=this.pagePosition();this._currentPageWidth=t,this._updatePageWidths(),this._checkBodyWidth(),this.restorePosition(e)},k.prototype._fullscreenResized=function(){this._setWidth((window.innerWidth||document.documentElement.clientWidth)-o)},k.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentWidth||defaultViewWidth},k.prototype._exitFullscreen=function(){this._setWidth(this._previousPageWidth)},k.prototype.pagePosition=function(){var e=t(this.viewportManager.container);if(e.is(window)){var n=this.documentManager.currentPageNum()||1,i=t("#outer_page_"+n),r=0;return i.length&&(r=(t(window).scrollTop()-i.offset().top)/i.height()),[n,r]}var o=this.documentManager.pages[this.documentManager.currentPageNum()||1],s=e.scrollTop(),a=e.scrollLeft(),c=(s-o.boundingRect.top)/o.boundingRect.height,l=(a-o.boundingRect.left)/o.boundingRect.width;return[o.pageNum,c,l]},k.prototype.restorePosition=function(e){if(!this._disableRestorePosition){var n=t(this.pages[e[0]].containerElem);if(this._gotoPage(e[0],{offset:-Math.floor(e[1]*n.height())}),null!=e[2]){var i=t(this.viewportManager.container);if(!t(i).is(window)){var r=e[2];r=Math.floor(r*n.width());var o=n.width()-i.width();i[0].scrollLeft=Math.min(o,r)}}}},k.prototype.zoom=function(t){var e=this.viewportManager.viewRect;if(e){var n=this.pagePosition();this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.restorePosition(n),this._zoomed(),this.documentManager._fireZoomed(t)}},h(x,["expectedFirstPageChanged","viewmodeChanged","enteredFullscreen","exitedFullscreen","hideExtras","showExtras","zoomed","pageHide","pageLoaded","allPagesAdded","pageView","viewmodeInitialized"]),x.prototype.disableRestorePosition=function(){this.viewManagers.scroll._disableRestorePosition=!0},x.prototype._fireZoomed=function(t){this.fireEvent("zoomed",t)},x.prototype.nextFontAggregatorHost=function(){return this._currentFontAggregatorHostIdx=(this._currentFontAggregatorHostIdx+1)%this.fontAggregatorHosts.length,this.fontAggregatorHosts[this._currentFontAggregatorHostIdx]},x.prototype._fireHideExtras=function(){this.fireEvent("hideExtras")},x.prototype._fireShowExtras=function(){this.fireEvent("showExtras")
},x.prototype.currentPageNum=function(){return this._expectedFirstPageNum},x.prototype.setupTestElements=function(){this._fontLoader.setupTestElements()},x.prototype.pageCount=function(){if(this.hasOwnProperty("_pageCount"))return this._pageCount;var t=0;for(var e in this.pages)this.pages.hasOwnProperty(e)&&t++;return this._pageCount=t,this._pageCount},x.prototype.setupPaidDocument=function(t,e){this.allowedPages=t,this.originalPageCount=e,this._allowedPagesHash=[],this._maximumAllowedPage=Math.max.apply(null,this.allowedPages),this._minimumAllowedPage=Math.min.apply(null,this.allowedPages),this._isPaidDocument=!0,this._pageMissingElements=[];for(var n=0;n<t.length;n++)this._allowedPagesHash[t[n]]=!0,(n>0&&t[n]>t[n-1]+1||0===n&&1!=t[n])&&this._pageMissingElements.push("page_missing_explanation_"+t[n].toString());this._maximumAllowedPage!=this.originalPageCount&&this._pageMissingElements.push("page_missing_explanation_"+(this.originalPageCount+1).toString())},x.prototype.minimumPageNumber=function(){return"book"==this.viewMode()?0:1},x.prototype.maximumPageNumber=function(){return this.allowedPages?this.originalPageCount:this.pageCount()},x.prototype.getClosestPageNumber=function(t,e){if(!this.allowedPages)return t;if(this._allowedPagesHash[t])return t;if(t>=this._maximumAllowedPage)return this._maximumAllowedPage;if(t<=this._minimumAllowedPage)return this._minimumAllowedPage;for(var n=1;n<=this.originalPageCount;n++){if(0>=e&&this._allowedPagesHash[t-n]===!0)return t-n;if(e>=0&&t+n<this.originalPageCount&&this._allowedPagesHash[t+n]===!0)return t+n}},x.prototype.setPageMissingModulesVisible=function(e){if("undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),this._isPaidDocument)for(var n=0;n<this._pageMissingElements.length;n++){var i=t(this._pageMissingElements[n]);i&&(e?i.show():i.hide())}},x.prototype.getNextAvailablePage=function(t){return getClosestPageNumber(t,1)},x.prototype.getPreviousAvailablePage=function(t){return getClosestPageNumber(t,-1)},x.prototype.flushFontQueue=function(){this._fontLoader.flushFontQueue()},x.prototype.visiblePagesChanged=function(){var t=[];for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e];n.isVisible&&t.push(n)}if(t.length){t.sort(function(t,e){return t.pageNum<e.pageNum?-1:1}),this.visiblePages=t;var i=this.firstVisiblePage;this.firstVisiblePage=t.length>0?t[0]:null,this.lastVisiblePage=t.length>0?t[t.length-1]:null,this.isScrolling||(this._loadAdjacentFonts(),this._loadAdjacentPages()),(this.firstVisiblePage===i||this.firstVisiblePage&&i)&&this.firstVisiblePage.pageNum==i.pageNum||!this.isScrolling&&this.firstVisiblePage&&this._updateExpectedFirstPage(this.firstVisiblePage.pageNum),this.scheduleLogPageView()}},x.prototype.boundingRatioForPage=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=n.bottom-n.top,r=n.right-n.left;return{left:(e.left-n.left)/r,right:(e.right-n.right)/r+1,top:S((e.top-n.top)/i+t.pageNum,t.pageNum,t.pageNum+1),bottom:S((e.bottom-n.bottom)/i+t.pageNum+1,t.pageNum,t.pageNum+1)}},x.prototype.scheduleLogPageView=function(){this.logPageViewTimout&&window.clearTimeout(this.logPageViewTimout);var t=this;this.logPageViewTimout=window.setTimeout(function(){t.logPageView(),t.logPageViewTimout=null},1e3)},x.prototype.getVisibleBBox=function(){var t={};if(this.firstVisiblePage){var e=this.boundingRatioForPage(this.firstVisiblePage);t.left=e.left,t.right=e.right,t.top=e.top}if(this.lastVisiblePage){var n=this.boundingRatioForPage(this.lastVisiblePage);t.bottom=n.bottom}return t},x.prototype.logPageView=function(){var t=this.getVisibleBBox();for(var e in t)t.hasOwnProperty(e)&&(t[e]=C(t[e]));var n=window.$rat;if(n){var i;i="2"==window.RAT_API_VERSION?[[t.left,t.top],[t.right,t.bottom]]:"("+t.left+" "+t.top+") ("+t.right+" "+t.bottom+")",n("fourgen.viewchange",i)}return this.fireEvent("pageView"),t},x.prototype._updateExpectedFirstPage=function(t){this._expectedFirstPageNum=t,this.fireEvent("expectedFirstPageChanged",this._expectedFirstPageNum)},x.prototype._loadAdjacentFonts=function(){if(this.firstVisiblePage&&this.lastVisiblePage)for(var t=this.firstVisiblePage.pageNum-i,e=this.lastVisiblePage.pageNum+i,n=t;e>=n;n++){var r=this.pages[n];r&&r.loadFonts()}},x.prototype._loadAdjacentPages=function(){if(this.firstVisiblePage&&this.lastVisiblePage){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=t;e>=i;i++){var r=this.pages[i];r&&!r.loadHasStarted&&(r.load(),this.mobile&&r.setWidth(this._pageWidths))}this.mobile&&this._removeUnusedPages()}},x.prototype._removeUnusedPages=function(){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=this.pages,r=n+1;i[r];)(t>r||r>e)&&i[r].remove(),r++},x.prototype._updatePageBoundingRects=function(){for(var t in this.pages)this.pages.hasOwnProperty(t)&&this.pages[t]._updateBoundingRect()},x.prototype.removeInsteadOfBlurring=function(){return/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)?!0:"undefined"==typeof Scribd||"undefined"==typeof t?!0:!1},x.prototype.addPage=function(t){if(!t.blur||!this.removeInsteadOfBlurring()){if(void 0===t.pageNum)throw"must have pageNum param";t.docManager=this;var e=new g(t);return this.pages[t.pageNum]=e,this._pageWidths&&e.setWidth(this._pageWidths),this.currentFontGroup.isFull()&&(this.currentFontGroup=this.currentFontGroup.newNextGroup()),e.setLoadFontGroup(this.currentFontGroup),e}t.containerElem.parentNode.removeChild(t.containerElem)},x.prototype.setIsScrolling=function(t){t?this._scrollingCount+=1:this._scrollingCount-=1,this._scrollingCount<0&&(this._scrollingCount=0),this.isScrolling=0===this._scrollingCount?!1:!0},x.prototype.setViewManager=function(t,e){if(this._currentViewManager)this._setViewManager(t),"function"==typeof e&&e();else{var n=this;this.addEvent("viewmodeInitialized",function(){n.setViewManager(t,e)})}},x.prototype._setViewManager=function(t,e){e||this._currentViewManager.unregister();var n=this._currentViewManager;this._currentViewManager=this.viewManagers[t],this._currentViewManager.register(this,this.viewportManager),this.fireEvent("viewmodeChanged",this.viewMode(),n?n.name():null)},x.prototype.setInitialViewManager=function(t){if(this._currentViewManager)throw"This should be called before any view manager exists";this._setViewManager(t,!0),this.fireEvent("viewmodeInitialized",this.viewMode(),null)},x.prototype.setDefaultWidth=function(t){this._currentViewManager._currentPageWidth=t,this._currentViewManager._currentZoomMultiplier=1,this._currentViewManager._updatePageWidths()},x.prototype.subImageSrc=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t.charCodeAt(e);var i=this._imageDomainSubstitutionList[n%this._imageDomainSubstitutionList.length];return t.replace(this._imageDomainSubstitutionFrom,i)},x.prototype.allPagesAdded=function(){if(this._allPagesAddedCalled)throw"can only call allPagesAdded once";this.viewportManager.enable(),this._updatePageBoundingRects(),this.setInitialViewManager(this.defaultViewMode),this.fireEvent("allPagesAdded")},x.prototype.setEmbeddedDoc=function(t){this._isEmbed="True"===t},x.prototype.setPageWidths=function(t){this._pageWidths=t;for(var e in this.pages)this.pages.hasOwnProperty(e)&&this.pages[e].setWidth(this._pageWidths);this._updatePageBoundingRects()},x.prototype.addFont=function(t,e,n,i,r,o){this._fontLoader.addFont(t,e,n,i,r,o)},x.prototype.setNumFonts=function(t){this._fontLoader.setNumFonts(t)},x.prototype.initStyles=function(){this._fontLoader.initStyles()},x.prototype.gotoPage=function(t,e){var n=!M(t),i=null;if(n&&(i=+(t%1).toFixed(2),t=Math.floor(t)),!(t<this.minimumPageNumber()||t>this.maximumPageNumber())){e||(e={}),n&&void 0==e.frac&&(e.frac=i);var r=e.direction||0,o=this.pages[t];void 0===o&&this._isPaidDocument&&(t=this.getClosestPageNumber(t,r),o=this.pages[t]),this.mobile&&this.pages[t]&&this.pages[t].setWidth(this._pageWidths),this._updateExpectedFirstPage(t),this._currentViewManager.gotoPage(this._expectedFirstPageNum,e)}},x.prototype.gotoPreviousPage=function(){var t=this._currentViewManager._pagingStep();this._currentViewManager.isTopPageInView()?this.gotoPage(this._expectedFirstPageNum-t,{direction:-1}):this.gotoPage(this._expectedFirstPageNum,{direction:-1})},x.prototype.gotoNextPage=function(){var t=this._currentViewManager._pagingStep();this.gotoPage(this._expectedFirstPageNum+t,{direction:1})},x.prototype.enterFullscreen=function(){this._currentViewManager.enterFullscreen()},x.prototype.exitFullscreen=function(){this._currentViewManager.exitFullscreen()},x.prototype.isFullscreen=function(){return this._currentViewManager.isFullscreen},x.prototype._fireEnteredFullscreen=function(){this.fireEvent("enteredFullscreen")},x.prototype._fireExitedFullscreen=function(){this.fireEvent("exitedFullscreen")},x.prototype.viewMode=function(){return this._currentViewManager?this._currentViewManager.name():null},x.prototype.zoom=function(t){this._currentViewManager.zoom(t)},x.prototype.resetZoom=function(){this._currentViewManager.resetZoom()},x.prototype.setImageDomainSubstitution=function(t,e){this._imageDomainSubstitutionFrom=t,this._imageDomainSubstitutionList=e},x.prototype.disableViewManagerResizeWidth=function(){v.prototype._checkBodyWidth=function(){}},x.prototype.disable=function(){this.disabled||(this.disabled=!0,this.viewportManager.disable())},x.prototype.doDynamicBlurring=function(e){var n,i,r;this.removeInsteadOfBlurring()||(n=t("#"+e),n.on("dragstart, selectstart, contextmenu",function(t){t.preventDefault()}),n.find("*").andSelf().attr("unselectable","on"),r=Modernizr&&Modernizr.textshadow&&t.browser&&(t.browser.webkit&&!t.browser.safari||t.browser.mozilla||t.browser.opera)&&!(t.browser.mozilla===!0&&parseFloat(t.browser.version)<4&&parseFloat(t.browser.version)>=3),t.browser||console.log("Hi there, it seems as though you've upgraded jQuery and browser detection is no longer working in 4gen.js"),t(document).ready(function(){i=t(t("#page_blur_promo_template").html()).removeAttr("id").appendTo("#"+e).css("zIndex",8).show(),i.find(".gap").html("Page "+e.split("_").pop()+" is not shown in this preview."),r||i.find(".page-blur-promo-overlay").height("100%").width("100%").css("zIndex",7).show()}),r&&(n.find(".text_layer").css({color:"transparent","text-shadow":"0px 0px 70px black"}),n.find(".text_layer [style]").css({color:"transparent"}),n.find(".image_layer").imagesLoaded(function(){n.find(".image_layer img").each(function(){this.height>250&&this.width>250&&t(this).css({opacity:.04})})})))},x.setJQuery=function(e){t=e},x.ScrollViewManager=k,x.SlideViewManager=w,x.BookViewManager=b,x}();window.DocumentManager=d},void 0===window.DocumentManager&&init_4gen();


/* public/javascripts/storage.js @ 1471295928 */
window.localStorage&&window.sessionStorage||function(){var t=function(t){function e(t,e,n){var i,r;n?(i=new Date,i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()):r="",document.cookie=t+"="+e+r+"; path=/"}function n(t){var e,n,i=t+"=",r=document.cookie.split(";");for(e=0;e<r.length;e++){for(n=r[e];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return null}function i(n){n=JSON.stringify(n),"session"==t?window.name=n:e("localStorage",n,365)}function r(){"session"==t?window.name="":e("localStorage","",365)}function o(){var e="session"==t?window.name:n("localStorage");return e?JSON.parse(e):{}}function s(){var t=0;for(var e in a)a.hasOwnProperty(e)&&(t+=1);return t}var a=o();return{clear:function(){a={},r(),this.length=s()},getItem:function(t){return t=encodeURIComponent(t),void 0===a[t]?null:a[t]},key:function(t){var e=0;for(var n in a){if(e==t)return decodeURIComponent(n);e++}return null},removeItem:function(t){t=encodeURIComponent(t),delete a[t],i(a),this.length=s()},setItem:function(t,e){t=encodeURIComponent(t),a[t]=String(e),i(a),this.length=s()},length:0}};window.localStorage||(window.localStorage=new t("local")),window.sessionStorage||(window.sessionStorage=new t("session"))}();


/* public/javascripts/modernizr.custom.12353.js @ 1471295928 */
window.Modernizr=function(t,e,n){function i(t){v.cssText=t}function r(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var i in t){var r=t[i];if(!o(r,"-")&&v[r]!==n)return"pfx"==e?r:!0}return!1}function a(t,e,i){for(var o in t){var s=e[t[o]];if(s!==n)return i===!1?t[o]:r(s,"function")?s.bind(i||e):s}return!1}function c(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+w.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?s(o,e):(o=(t+" "+k.join(i+" ")+i).split(" "),a(o,e,n))}var l,u,d,h="2.8.2",p={},f=!0,_=e.documentElement,g="modernizr",m=e.createElement(g),v=m.style,y=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),b="Webkit Moz O ms",w=b.split(" "),k=b.toLowerCase().split(" "),x={},S=[],C=S.slice,T=function(t,n,i,r){var o,s,a,c,l=e.createElement("div"),u=e.body,d=u||e.createElement("body");if(parseInt(i,10))for(;i--;)a=e.createElement("div"),a.id=r?r[i]:g+(i+1),l.appendChild(a);return o=["&#173;",'<style id="s',g,'">',t,"</style>"].join(""),l.id=g,(u?l:d).innerHTML+=o,d.appendChild(l),u||(d.style.background="",d.style.overflow="hidden",c=_.style.overflow,_.style.overflow="hidden",_.appendChild(d)),s=n(l,t),u?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),_.style.overflow=c),!!s},E={}.hasOwnProperty;d=r(E,"undefined")||r(E.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return E.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=C.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,s=e.apply(o,n.concat(C.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(C.call(arguments)))};return i}),x.textshadow=function(){return""===e.createElement("div").style.textShadow},x.csstransforms=function(){return!!c("transform")},x.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in _.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t};for(var D in x)d(x,D)&&(u=D.toLowerCase(),p[u]=x[D](),S.push((p[u]?"":"no-")+u));return p.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(_.className+=" "+(e?"":"no-")+t),p[t]=e}return p},i(""),m=l=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=m[t[_]];return e||(e={},g++,t[_]=g,m[g]=e),e}function o(t,n,i){if(n||(n=e),u)return n.createElement(t);i||(i=r(n));var o;return o=i.cache[t]?i.cache[t].cloneNode():f.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!o.canHaveChildren||p.test(t)||o.tagUrn?o:i.frag.appendChild(o)}function s(t,n){if(t||(t=e),u)return t.createDocumentFragment();n=n||r(t);for(var o=n.frag.cloneNode(),s=0,a=i(),c=a.length;c>s;s++)o.createElement(a[s]);return o}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function c(t){t||(t=e);var i=r(t);return v.shivCSS&&!l&&!i.hasCSS&&(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(t,i),t}var l,u,d="3.7.0",h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,_="_html5shiv",g=0,m={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",l="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){l=!0,u=!0}}();var v={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:u,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:s};t.html5=v,c(e)}(this,e),p._version=h,p._prefixes=y,p._domPrefixes=k,p._cssomPrefixes=w,p.testProp=function(t){return s([t])},p.testAllProps=c,p.testStyles=T,p.prefixed=function(t,e,n){return e?c(t,e,n):c(t,"pfx")},_.className=_.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+S.join(" "):""),p}(this,this.document),function(t,e,n){function i(t){return"[object Function]"==g.call(t)}function r(t){return"string"==typeof t}function o(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=m.shift();v=1,t?t.t?f(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function c(t,n,i,r,o,c,l){function u(e){if(!p&&s(d.readyState)&&(y.r=p=1,!v&&a(),d.onload=d.onreadystatechange=null,e)){"img"!=t&&f(function(){w.removeChild(d)},50);for(var i in T[n])T[n].hasOwnProperty(i)&&T[n][i].onload()}}var l=l||h.errorTimeout,d=e.createElement(t),p=0,g=0,y={t:i,s:n,e:o,a:c,x:l};1===T[n]&&(g=1,T[n]=[]),"object"==t?d.data=n:(d.src=n,d.type=t),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},m.splice(r,0,y),"img"!=t&&(g||2===T[n]?(w.insertBefore(d,b?null:_),f(u,l)):T[n].push(d))}function l(t,e,n,i,o){return v=0,e=e||"j",r(t)?c("c"==e?x:k,t,e,this.i++,n,i,o):(m.splice(this.i++,0,t),1==m.length&&a()),this}function u(){var t=h;return t.loader={load:l,i:0},t}var d,h,p=e.documentElement,f=t.setTimeout,_=e.getElementsByTagName("script")[0],g={}.toString,m=[],v=0,y="MozAppearance"in p.style,b=y&&!!e.createRange().compareNode,w=b?p:_.parentNode,p=t.opera&&"[object Opera]"==g.call(t.opera),p=!!e.attachEvent&&!p,k=y?"object":p?"script":"img",x=p?"script":k,S=Array.isArray||function(t){return"[object Array]"==g.call(t)},C=[],T={},E={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,n,i,t=t.split("!"),r=C.length,o=t.pop(),s=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;s>n;n++)i=t[n].split("="),(e=E[i.shift()])&&(o=e(o,i));for(n=0;r>n;n++)o=C[n](o);return o}function s(t,r,o,s,a){var c=e(t),l=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(r&&(r=i(r)?r:r[t]||r[s]||r[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,r,o,s,a):(T[c.url]?c.noexec=!0:T[c.url]=1,o.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(i(r)||i(l))&&o.load(function(){u(),r&&r(c.origUrl,a,s),l&&l(c.origUrl,a,s),T[c.url]=2})))}function a(t,e){function n(t,n){if(t){if(r(t))n||(d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}),s(t,d,e,0,l);else if(Object(t)===t)for(c in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(c)&&(!n&&!--a&&(i(d)?d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}:d[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(h[c])),s(t[c],d,e,c,l))}else!n&&p()}var a,c,l=!!t.test,u=t.load||t.both,d=t.callback||o,h=d,p=t.complete||o;n(l?t.yep:t.nope,!!u),u&&n(u)}var c,l,d=this.yepnope.loader;if(r(t))s(t,0,d,0);else if(S(t))for(c=0;c<t.length;c++)l=t[c],r(l)?s(l,0,d,0):S(l)?h(l):Object(l)===l&&a(l,d);else Object(t)===t&&a(t,d)},h.addPrefix=function(t,e){E[t]=e},h.addFilter=function(t){C.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,i,r,c,l){var u,d,p=e.createElement("script"),r=r||h.errorTimeout;p.src=t;for(d in i)p.setAttribute(d,i[d]);n=l?a:n||o,p.onreadystatechange=p.onload=function(){!u&&s(p.readyState)&&(u=1,n(),p.onload=p.onreadystatechange=null)},f(function(){u||(u=1,n(1))},r),c?p.onload():_.parentNode.insertBefore(p,_)},t.yepnope.injectCss=function(t,n,i,r,s,c){var l,r=e.createElement("link"),n=c?a:n||o;r.href=t,r.rel="stylesheet",r.type="text/css";for(l in i)r.setAttribute(l,i[l]);s||(_.parentNode.insertBefore(r,_),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};


/* public/javascripts/imagesloaded.pkgd.js @ 1471295928 */
!function(t){"use strict";function e(){}function n(t,e){if(r)return e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1}var i=e.prototype,r=Array.prototype.indexOf?!0:!1;i._getEvents=function(){return this._events||(this._events={})},i.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,e){var i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1===n(e,r[i])&&r[i].push(e);return this},i.on=i.addListener,i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=n(e,o[r]),-1!==i&&o[r].splice(i,1));return this},i.off=i.removeListener,i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.emitEvent=function(t,e){var n,i,r,o=this.getListenersAsObject(t);for(i in o)if(o.hasOwnProperty(i))for(n=o[i].length;n--;)r=e?o[i][n].apply(null,e):o[i][n](),r===!0&&this.removeListener(t,o[i][n]);return this},i.trigger=i.emitEvent,i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),function(t){"use strict";var e=document.documentElement,n=function(){};e.addEventListener?n=function(t,e,n){t.addEventListener(e,n,!1)}:e.attachEvent&&(n=function(e,n,i){e[n+i]=i.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,i.handleEvent.call(i,e)}:function(){var n=t.event;n.target=n.target||n.srcElement,i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var i=function(){};e.removeEventListener?i=function(t,e,n){t.removeEventListener(e,n,!1)}:e.detachEvent&&(i=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var r={bind:n,unbind:i};"function"==typeof define&&define.amd?define(r):t.eventie=r}(this),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===c.call(t)}function i(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var i=0,r=t.length;r>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,n){function r(t,n,s){if(!(this instanceof r))return new r(t,n);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=i(t),this.options=e({},this.options),"function"==typeof n?s=n:e(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function c(t){this.img=t}r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},r.prototype.check=function(){function t(t,r){return e.options.debug&&a&&s.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emit("progress",this,t),this.jqDeferred&&this.jqDeferred.notify(this,t)},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(t,this),this.emit("always",this),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o&&(o.fn.imagesLoaded=function(t,e){var n=new r(this,t,e);return n.jqDeferred.promise(o(this))});var l={};return c.prototype=new t,c.prototype.check=function(){var t=l[this.img.src];if(t)return void this.useCached(t);if(l[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.img.src},c.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},c.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=t.jQuery,s=t.console,a="undefined"!=typeof s,c=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter","eventie"],r):t.imagesLoaded=r(t.EventEmitter,t.eventie)}(window);


/* public/javascripts/ouibounce.js @ 1471295928 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.ouibounce=e()}(this,function(){return function(t,e){"use strict";function n(t,e){return"undefined"==typeof t?e:t}function i(t){var e=24*t*60*60*1e3,n=new Date;return n.setTime(n.getTime()+e),"; expires="+n.toUTCString()}function r(){u()||(S.addEventListener("mouseleave",o),S.addEventListener("mouseenter",s),S.addEventListener("keydown",a))}function o(t){t.clientY>_||(x=setTimeout(d,m))}function s(){x&&(clearTimeout(x),x=null)}function a(t){C||t.metaKey&&76===t.keyCode&&(C=!0,x=setTimeout(d,m))}function c(t,e){return l()[t]===e}function l(){for(var t=document.cookie.split("; "),e={},n=t.length-1;n>=0;n--){var i=t[n].split("=");e[i[0]]=i[1]}return e}function u(){return c(w,"true")&&!f}function d(){u()||(t&&(t.style.display="block"),v(),h())}function h(t){var e=t||{};"undefined"!=typeof e.cookieExpire&&(y=i(e.cookieExpire)),e.sitewide===!0&&(k=";path=/"),"undefined"!=typeof e.cookieDomain&&(b=";domain="+e.cookieDomain),"undefined"!=typeof e.cookieName&&(w=e.cookieName),document.cookie=w+"=true"+y+b+k,S.removeEventListener("mouseleave",o),S.removeEventListener("mouseenter",s),S.removeEventListener("keydown",a)}var p=e||{},f=p.aggressive||!1,_=n(p.sensitivity,20),g=n(p.timer,1e3),m=n(p.delay,0),v=p.callback||function(){},y=i(p.cookieExpire)||"",b=p.cookieDomain?";domain="+p.cookieDomain:"",w=p.cookieName?p.cookieName:"viewedOuibounceModal",k=p.sitewide===!0?";path=/":"",x=null,S=document.documentElement;setTimeout(r,g);var C=!1;return{fire:d,disable:h,isDisabled:u}}});


/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1471295863 */


/* :files, 'public/javascripts/shared', ... @ (none) */


/* :files, 'app/views', ... @ (none) */


/* :files, 'app/views', ... @ 1471295863 */
/* app/views/shared/reading_progress/base.coffee @ 1471295863 */
(function(){Scribd.ReadingProgress={},Scribd.ReadingProgress.Base=function(){function t(t){var e,n,i;this.opts=null!=t?t:{},this.enabled()&&(this.opts=_.extend(this.default_opts(),this.opts),this.get_ms=(null!=(e=Scribd.ServerOptions)?e.reading_progress_throttle_get_milliseconds:void 0)||this.opts.throttle_get,this.post_ms=(null!=(n=Scribd.ServerOptions)?n.reading_progress_throttle_post_milliseconds:void 0)||this.opts.throttle_post,this.url=null!=(i=Scribd.current_doc.reading_progress)?i.update_url:void 0,this.doc_id=Scribd.current_doc.id,this.offset=null,this.offset_type=null,this.percentage=null,this.throttled_get_handler=_.throttle(function(t){return function(){return t.get()}}(this),this.get_ms,{leading:!0,trailing:!1}),this.throttled_post_handler=_.throttle(function(t){return function(){return t.post()}}(this),this.post_ms,{leading:!1,trailing:!0}),$(window).off(this.events.focus).on(this.events.focus,this.throttled_get_handler))}return t.prototype.events={focus:"focus.reading_progress",scroll:"scroll.reading_progress"},t.prototype.default_opts=function(){return{throttle_get:6e4,throttle_post:1e4}},t.prototype.enabled=function(){var t;return(null!=(t=Scribd.ServerOptions)?t.reading_progress_enabled:void 0)&&Scribd.logged_in?!0:!1},t.prototype.update_external_progress=function(t){return(null!=t?t.progress:void 0)&&!t.progress.from_current_device&&"browser"!==t.progress.device_name?$(window).trigger("scribd:external_reading_progress",t.progress):void 0},t.prototype.get=function(){return $.get(this.url,{doc_id:this.doc_id},this.update_external_progress)},t.prototype.post=function(){var t;return t=Scribd.CSRF.with_token({doc_id:this.doc_id,offset:this.offset,offset_type:this.offset_type,percentage:this.percentage}),$.post(this.url,t,this.update_external_progress)},t}()}).call(this);


/* app/views/pdfs/highlighter.coffee @ 1471295862 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.PdfHighlighter=function(){function e(e){this.scroll_to_el=t(this.scroll_to_el,this),this.container=$(e),docManager.addEvent("pageLoaded",function(t){return function(e){var n,i;return n=parseInt(e.id.match(/\d+$/)[0],10),(null!=(i=t.pages_to_highlight)?i[n]:void 0)?(t.highlight_element(e,t.last_query),delete t.pages_to_highlight[n],t.selecting&&t.selecting.page===n?t.select_result(t.selecting.page,t.selecting.idx):void 0):void 0}}(this))}return e.prototype.highlight_class="fourgen_highlight",e.prototype.select_result=function(t,e){var n,i,r,o;return delete this.selecting,(i=null!=(r=docManager.pages[t])?r.innerPageElem:void 0)?(n=this.highlight_class+"_selected",null!=(o=this.selected)&&o.removeClass(n),this.selected=$(i).find("."+this.highlight_class+":eq("+e+")").addClass(n),docManager.gotoPage(t),_.defer(function(t){return function(){return null!=t.selected[0].scrollIntoView?t.scroll_to_el(t.selected):void 0}}(this))):(docManager.gotoPage(t),this.selecting={page:t,idx:e})},e.prototype.scroll_to_el=function(t){var e,n;return"function"==typeof(e=t[0]).scrollIntoView&&e.scrollIntoView(),n=this.container.find(".document_scroller")[0],n.scrollTop-=300},e.prototype.highlight_from_results=function(t,e){var n,i,r,o,s,a,c;for(this.last_query=t,this.last_results=e,this.pages_to_highlight={},s=_.uniq(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)a=e[t],i.push(a.pageNum);return i}(),!0),c=[],n=0,i=s.length;i>n;n++)o=s[n],r=docManager.pages[o],c.push((null!=r?r.innerPageElem:void 0)?this.highlight_element(r.containerElem,t):this.pages_to_highlight[o]=!0);return c},e.prototype.clear=function(){var t,e,n,i,r,o;for(r=this.container.find("."+this.highlight_class),o=[],e=0,n=r.length;n>e;e++)t=r[e],i=t.parentNode,i.replaceChild(t.firstChild,t),o.push(i.normalize());return o},e.prototype.highlight_element=function(t,e){var n,i,r;return r=RegExp(Scribd.escape_regexp(e),"i"),i=0,n=function(t){return function(o){var s,a,c,l,u,d,h;if(d=0,3===o.nodeType)l=o.data.search(r),l>=0&&(h=$("<span>"),h.addClass(t.highlight_class),s=o.splitText(l),s.splitText(e.length),a=$(s).clone(),h.append(a),$(s).replaceWith(h),d=1,i++);else if(1===o.nodeType&&o.childNodes&&!/(script|style)/i.test(o.tagName))if((null!=(u=o.className)?u.indexOf(t.highlight_class):void 0)<0||null==o.className)for(c=0;c<o.childNodes.length;)c+=n(o.childNodes[c]),++c;else i++;return d}}(this),n(t),i},e}()}).call(this);


/* app/views/pdfs/_seo_shared.coffee @ 1471295862 */
(function(){Scribd.SeoShared=function(){function t(){}return t.quote_duration=5e3,t.display_interval=moment.duration(1,"days"),t.setup_assignment=function(){var t,e,n;if(null!=(n=document.location.search)?n.match(/\bseo_roadblock\b/):void 0)return!0;if(Scribd.eligible_for_seo_roadblock&&this.has_correct_referrer()&&(t=new CookieJar({path:"/",expires:this.display_interval.asSeconds()}),!t.get("seo_ld")||(e=moment(t.get("seo_ld")),moment().isAfter(e.add(this.display_interval)))))return t.put("seo_ld",moment()),!0},t.has_correct_referrer=function(){return"en_US"===I18n.locale?!0:document.referrer.match(/google|bing|yahoo/i)||window.location.hash.match(/\bscribd\b/)},t.banner_variation=function(){return{value_prop:Scribd.nway_test_choice_value("seo_banner_value_prop")||"default",cta:Scribd.nway_test_choice_value("seo_banner_cta")||"default",fine_print:Scribd.nway_test_choice_value("seo_banner_under_cta")||"default"}},t.seo_variation=function(){return"new_basic"},t.eligible_for_www_test=function(){return this.is_host_www()?!1:"no_pmp"===this.www_variation()},t.www_variation=function(){return Scribd.nway_test_choice_value("non_www_remove_pmp_upsell")||"control"},t.is_host_www=function(){return document.location.host.match(/\bwww/)},t}()}).call(this);


/* app/views/pdfs/_seo_banner_text_dictionary.coffee @ 1471295862 */
(function(){Scribd.SeoBannerTextDictionary=function(){function t(){}return t.data=function(){return{cta:{"default":"Start your free 30 days","14_days":"Start your free 30 days",free_trial:"Start your free trial",read_free:"Read free for 30 days",read_free_trial:"Read free with a trial",join_free:"Join Scribd for free"},value_prop:{"default":{header:"Never pay full price to read again",sub_header:"Join Scribd and get the best books and audiobooks"},never:{header:"Never pay full price to read again",sub_header:"Join Scribd and get the best books and audiobooks"},always:{header:"There's always more to the story",sub_header:"Join Scribd and never stop reading"},become:{header:"Become an expert in anything",sub_header:"Join Scribd, the membership for readers"},save:{header:"Save 80% off retail prices with a Scribd membership",sub_header:"The best books, audiobooks, and more"},put:{header:"Put a library in your pocket",sub_header:"The best books, audiobooks, documents, and more"},listen:{header:"Listen to the best audiobooks, read the best books",sub_header:"Join Scribd and save 80% off retail prices"},read:{header:"Read what interests you",sub_header:"Broaden your knowledge with Scribd"}},fine_print:{"default":"$8.99/month after that. Cancel any time.",none:null,cancel:"Cancel any time",no_commit:"No commitment, cancel any time","8_99":"$8.99/month after that. Cancel any time.","8_99_cancel":"$8.99/month. Cancel any time."}}},t}()}).call(this);


/* app/views/shared/reading_progress/pdf.coffee @ 1471295863 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Scribd.ReadingProgress.Pdf=function(n){function i(e){this.opts=null!=e?e:{},this.update=t(this.update,this),i.__super__.constructor.call(this,this.opts),$(this.opts.scroll_node).off(this.events.scroll).on(this.events.scroll,this.update)}return e(i,n),i.prototype.enabled=function(){return window.docManager&&this.opts.scroll_node?i.__super__.enabled.apply(this,arguments):!1},i.prototype.default_opts=function(){return _.extend(i.__super__.default_opts.apply(this,arguments),{scroll_node:null})},i.prototype.update=function(){var t;if(this.enabled())return t=window.docManager.currentPageNum()-1,this.offset_type="page",this.offset=t,this.percentage=t/this.opts.total_pages*100,this.throttled_post_handler()},i}(Scribd.ReadingProgress.Base)}).call(this);


/* app/views/shared/reading_progress/epub.coffee @ 1471295863 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.ReadingProgress.Epub=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.update=function(t,e,n){return this.enabled()?(this.offset_type=t,this.offset=e,this.percentage=n,this.throttled_post_handler()):void 0},n.prototype.track=function(){},n}(Scribd.ReadingProgress.Base)}).call(this);


/* app/views/shared/reading_progress/audio.coffee @ 1471295863 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Scribd.ReadingProgress.Audio=function(n){function i(e){this.opts=null!=e?e:{},this.update=t(this.update,this),this.player=Scribd.audiobook_player,this.previous_progress=this.get_progress(),i.__super__.constructor.call(this,this.opts),this.player.on("scribd:audiobook:play scribd:audiobook:pause scribd:audiobook:bookmark_location scribd:audiobook:unload scribd:audiobook:trackChanged scribd:audiobook:next scribd:audiobook:prev scribd:audiobook:seekTo scribd:audiobook:skipBack scribd:audiobook:jumpTo",this.update),setInterval(this.update,this.post_ms)}return e(i,n),i.get_track_and_position=function(t){var e,n,i,r,o,s;if(n=Scribd.audiobook_player.current_chapters(),t>Scribd.audiobook_player.get_runtime())return{track_num:n.length-1,track_pos:n[n.length-1].duration};for(i=0,o=r=0,s=n.length;s>r;o=++r){if(e=n[o],!(i+e.duration<t))return{track_num:o,track_pos:t-i};i+=e.duration}},i.prototype.previous_progress=0,i.prototype.enabled=function(){return this.player?i.__super__.enabled.apply(this,arguments):!1},i.prototype.default_opts=function(){return _.extend(i.__super__.default_opts.apply(this,arguments),{preview_restricted:null,preview_threshold:null,player:null})},i.prototype.update=function(){var t;if(this.enabled())return t=this.get_progress(),this.offset_type="ms",this.offset=t,this.percentage=t/this.player.get_runtime()*100,this.player.isPlaying()?(this.post(),this.track_for_payouts()):void 0},i.prototype.get_progress=function(t,e){var n,i,r,o,s,a;if(null==t&&(t=this.player.get_track_num()),null==e&&(e=this.player.get_track_pos()),i=null!=(a=this.player.current_chapters())?a.slice(0,t):void 0){for(s=0,r=0,o=i.length;o>r;r++)n=i[r],s+=n.duration;return s+=e,this.opts.preview_restricted?s=Math.min(s,this.opts.preview_threshold):s}},i.prototype.track_for_payouts=function(){var t;return t=this.get_progress(),$rat("abook_listen",[Scribd.current_doc.id,void 0,void 0,this.previous_progress,t]),$rat.root().flushEvents(),this.previous_progress=t},i}(Scribd.ReadingProgress.Base)}).call(this);


/* :class_inlines, 'app/views', ... @ 1471295863 */
/* app/views/shared/my_library_reading_states.coffee @ 1471295863 */
(function(){Scribd.Shared.MyLibraryReadingStates=function(){function t(t,e){this.container=t,this.opts=null!=e?e:{},this.default_opts(),this.container=$(this.container),Scribd.Shared.MyLibraryReadingStates.instance=this,this.opts.masked_admin||(this.initial_state=this.opts.current_state,this.current_state=this.initial_state,_.defer(function(t){return function(){return t.opts.currently_reading_active&&t.init_currently_reading_timer(),t.opts.finished_active&&!t.opts.is_preview&&t.init_end_of_reading_listener(),t.opts.chapter_document_id&&!t.opts.is_preview?t.init_chapter_document_listener():void 0}}(this)))}return t.prototype.THRESHOLDS={book:18e4,audiobook:1,comic:18e4,"default":18e4,sheet_music_chapter:2e4},t.prototype.default_opts=function(){return this.opts=_.extend({current_state:0,finished_state:-1,reading_state:-2,flash_duration:5e3,currently_reading_active:!0,finished_active:!0},this.opts)},t.prototype.state_name=function(){switch(this.current_state){case this.opts.reading_state:return"currently_reading";case this.opts.finished_state:return"finished";default:return this.current_state}},t.prototype.init_currently_reading_timer=function(){var t;return t=this.THRESHOLDS.hasOwnProperty(this.opts.document_type)?this.THRESHOLDS[this.opts.document_type]:"sheet_music"===this.opts.document_type&&location.hash.indexOf("block=")>=0?this.THRESHOLDS.sheet_music_chapter:this.THRESHOLDS["default"],this.timer=setTimeout(function(t){return function(){return Scribd.Epub?$(document.body).one("scribd:epub_progress",function(){return null==t.opts.current_state&&t.show_flash_template("currently_reading_flash"),t.add_to_currently_reading_state()}):t.opts.is_audiobook&&!t.opts.is_audiobook_preview?t.add_to_currently_reading_state():$(window).add("undefined"!=typeof DocumentManager&&null!==DocumentManager?DocumentManager.scrollParent:void 0).one("scroll",function(){return t.add_to_currently_reading_state()})}}(this),t)},t.prototype.init_end_of_reading_listener=function(){var t;return t=function(t){return function(){return t.finished||t.opts.current_state===t.opts.finished_state?void 0:(t.add_to_finished_state(),t.show_flash_template("finished_reading_flash"))}}(this),Scribd.epub_book_page&&(Scribd.epub_book_page.opts.is_comic?Scribd.epub_book_page.epub.registerRedrawCallback(function(){return Scribd.epub_book_page.comic_end_of_reading()?t():void 0}):Scribd.epub_book_page.epub.registerEndOfContentCallback(function(e){return e?t():void 0})),Scribd.epub_doc_page&&(Scribd.epub_doc_page.opts.is_comic?Scribd.epub_doc_page.register_update_callback(function(){return Scribd.epub_doc_page.comic_end_of_reading()?t():void 0}):Scribd.epub_doc_page.epub.registerEndOfContentCallback(function(e){return e?t():void 0})),Scribd.audiobooks?Scribd.audiobooks.end_of_reading_callbacks.push(t):void 0},t.prototype.init_chapter_document_listener=function(){var t,e,n;if(this.opts.chapter_document_id&&null!=(null!=(n=Scribd.epub_book_page)?n.epub:void 0))return e=!1,t=Scribd.epub_book_page.epub.currentPage(),Scribd.epub_book_page.epub.registerRedrawCallback(function(n){return function(){var i;if(!e)return i=Scribd.epub_book_page.epub.currentPage(),i!==t?(e=!0,n.add_to_currently_reading_state(n.opts.chapter_document_id),n.show_flash_template("currently_reading_flash")):void 0}}(this))},t.prototype.add_to_currently_reading_state=function(t){return null==t&&(t=this.opts.document_id),Scribd.Bookmarks.update_bookmarks_states({document_ids:[t],state:this.opts.reading_state}),this.container.trigger("scribd:state_changed",this.state_name())},t.prototype.add_to_finished_state=function(){return this.finished=!0,Scribd.Bookmarks.update_bookmarks_states({document_ids:[this.opts.document_id],state:this.opts.finished_state}),this.container.trigger("scribd:state_changed",this.state_name())},t.prototype.revert_state=function(){return Scribd.Bookmarks.update_bookmarks_states({document_ids:[this.opts.document_id],state:this.opts.current_state,complete:function(t){return function(){return flasher.dismiss(),t.finished=t.opts.current_state===t.opts.finished_state,t.container.trigger("scribd:state_changed",t.state_name())}}(this)})},t.prototype.remove_bookmark=function(){return Scribd.Bookmarks.remove_bookmark(this.opts.document_id,{complete:function(t){return function(){return t.container.trigger("scribd:bookmark_removed"),flasher.dismiss()}}(this)})},t.prototype.show_flash_template=function(t,e){var n,i;return null==e&&(e={}),i=_.template($("#tpl_"+t).html()),n=i(e),this.show_flash(n)},t.prototype.show_flash=function(t,e){var n,i;return null==e&&(e="info"),n=$(".flash_container"),i=new Scribd.Flasher(n,{raw:!0,duration:this.opts.flash_duration}),i.show(e,t),n.dispatch("click",{remove_bookmark:function(t){return function(){return null!=t.opts.current_state?t.revert_state():t.remove_bookmark()}}(this)})},t}()}).call(this);


/* app/views/shared/filtered_document_page.coffee @ 1471295862 */
(function(){Scribd.UI||(Scribd.UI={}),Scribd.UI.FilteredDocumentPage=function(){function t(t){var e;this.container=$(t),e=this.container.find(".filter_picker"),e.is(".open")&&this.container.find(".toggle_filters_btn").addClass("open"),this.container.on("click",".toggle_filters_btn",function(){return function(t){return $(t.currentTarget).toggleClass("open"),e.slideToggle("fast")}}(this)),this.container.find(".language_filter_picker").fancy_select(),this.container.on("change",".language_filter_picker",function(){return function(t){return window.location=$(t.currentTarget).val()}}(this))}return t}()}).call(this);


/* app/views/shared/app_download_promo/lightbox.coffee @ 1471295862 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.AppDownloadPromoLightbox=function(e){function n(t,e){this.opts=e,this.container=$(t),n.__super__.constructor.apply(this,arguments),this.opts.load_once&&this.setup_cookie_jar(),this.opts.open_on_load&&_.defer(function(t){return function(){return t.another_lightbox_is_open()?void 0:t.show()}}(this))}return t(n,e),n.prototype.setup_cookie_jar=function(){return this.jar=new CookieJar({domain:window.location.host,expires:31536e4,path:"/"})},n.prototype.show=function(){var t,e;if(!this.opts.load_once||!this.jar.get(this.opts.cookie))return n.__super__.show.apply(this,arguments),t={page:this.opts.track_page},(null!=(e=Scribd.current_doc)?e.id:void 0)&&(t.doc_id=Scribd.current_doc.id),this.container.track_rats("download_app_promo:lightbox:view",t)},n.prototype.close=function(){var t,e;return this.opts.load_once&&this.jar.put(this.opts.cookie,1),t={item:"close lightbox",page:this.opts.track_page},(null!=(e=Scribd.current_doc)?e.id:void 0)&&(t.doc_id=Scribd.current_doc.id),n.__super__.close.apply(this,arguments),_.defer(function(e){return function(){return e.container.track_rats("download_app_promo:lightbox:click",t)}}(this))},n}(Scribd.StackedLightbox)}).call(this);


/* app/views/pdfs/errors/deleted.coffee @ 1471295862 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.PdfsDeleted=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.fit_to_width(),Scribd.hook_tooltips(this.container),this.container.find("[data-default_text]").placeholder_text(),new Scribd.UI.FilteredDocumentPage(this.container)}return t(n,e),n}(Scribd.UI.ObjectGrid)}).call(this);


/* app/views/pdfs/lightboxes/_download_lightbox.coffee @ 1471295862 */
(function(){var t,e,n,i,r,o,s,a,c,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;a=React.DOM,n=a.div,c=a.span,s=a.p,i=a.em,o=a.label,r=a.input,t=a.a,e=Scribd.R.component_builder("Pdfs.Lightboxes.DownloadLightbox",{css_class:"autogen_class_views_pdfs_lightboxes_download_lightbox",track_category:"download_dialog"}),l=React.PropTypes,e({propTypes:{show_paywall:l.bool,archive_url:l.string,base_url:l.string,recommendation_html:l.string,download_url:l.string,document:l.shape({secret_password:l.string}).isRequired,filename:l.string.isRequired,formats:l.arrayOf(l.shape({extension:l.string,filesize:l.string})).isRequired},getInitialState:function(){var t;return{selected_extension:null!=(t=this.props.formats[0])?t.extension:void 0,formats:this.props.formats,download_started:!1,nag:this.props.nag}},componentLightboxShow:function(){return this.setState({download_started:!1})},componentDidMount:function(){return this.container().on("Scribd:lightbox:closed",function(){return function(){return $(document.body).track_rats("doc:download_modal:hide")}}(this))},componentDidUpdate:function(t,e){var n;return!e.download_started&&this.state.download_started?new(n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.min_spacing=20,e.prototype.min_min_spacing=20,e.prototype.margin=10,e}(Scribd.UI.ObjectGrid))(this.container().find(".document_grid")):void 0},widget_css_classes:function(t){return classNames(t,"lightbox")},do_download:function(){var t;return $(document.body).track_rats("doc:final_download_button:click",{format:this.state.selected_extension}),t=this.props.show_paywall?this.props.archive_url:$.param.querystring(this.props.base_url,{secret_password:this.props.document.secret_password,extension:this.state.selected_extension}),setTimeout(function(){return window.location=t},200)},render:function(){var t;return n({className:"wrapper",children:[n({className:"close_button"},c({className:"icon-close"})),this.state.download_started?void 0:n({className:"title"},"Download document"),n({className:"content",children:(null!=(t=this.state.nag)?t.paused:void 0)?this.render_paused():this.state.download_started?this.render_after_download():this.render_downloader()})]})},render_paused:function(){return[s({children:["Your membership is currently paused until "+this.state.nag.next_payment_due+". Would you like to resume your membership now to download ",i({},this.props.document.title),"?"]}),n({className:"buttons",children:[this.state.loading?void 0:this.common_button({href:"javascript:void(0)",className:"outline_btn button_sub_action",onClick:function(){return function(t){return t.preventDefault(),Scribd.Lightbox.close()}}(this)},"No Thanks")," ",this.common_button({className:classNames({disabled:this.state.loading}),disabled:this.state.loading,onClick:function(t){return function(e){return e.preventDefault(),t.setState({loading:!0}),t.unpause_account()}}(this)},this.state.loading?"Resuming":"Resume Membership")]})]},unpause_account:function(){return $.getJSON(this.state.nag.fix_url).fail(function(t){return function(){return window.location=t.state.nag.fix_url}}(this)).done(function(t){return function(){return $(document.body).trigger("scribd:unpause_account"),$.post(t.props.download_url).done(function(e){var n;return t.setState({nag:null,loading:!1,just_resumed:!0,selected_extension:null!=(n=e.props.formats[0])?n.extension:void 0,formats:e.props.formats})})}}(this))},render_downloader:function(){return[this.state.just_resumed?s({},"Your membership has been resumed."):void 0,this.render_current_format(),this.render_format_picker(),n({className:"buttons"},this.common_button({onClick:function(t){return function(){return t.do_download(),t.setState({download_started:!0})}}(this)},"Download "+this.current_format().extension))]},current_format:function(){return _.find(this.state.formats,function(t){return function(e){return e.extension===t.state.selected_extension}}(this))},render_current_format:function(){var t;return t=this.current_format(),n({className:"document_data",children:[n({className:"data_row",children:["File name: ",c({className:"data_value"},this.props.filename+"."+t.extension)]}),n({className:"data_row",children:["File size: ",c({className:"data_value"},t.filesize)]})]})},render_format_picker:function(){return 1!==this.state.formats.length?n({className:"format_picker",children:this.state.formats.map(function(t){return function(e){return n({className:"format_row"},o({children:[r({type:"radio",name:"download_extension",checked:e.extension===t.state.selected_extension,value:e.extension,onChange:function(){return t.setState({selected_extension:e.extension})}})," "+e.extension.toUpperCase()]}))}}(this))}):void 0},render_after_download:function(){return[n({className:"primary_message",children:["Your download has started. ",t({href:"javascript:void(0)",onClick:function(){return function(){return Scribd.Lightbox.close()}}(this)},"Close this dialog")]}),n({className:"secondary_message",children:["Having trouble downloading? ",t({href:"javascript:void(0)",onClick:function(t){return function(){return t.setState({download_started:!1})}}(this)},"Try again")]}),this.props.recommendation_html?n({key:"recommendations",className:"rec_wrapper",dangerouslySetInnerHTML:{__html:this.props.recommendation_html}}):void 0]}})}).call(this);


/* app/views/pdfs/lightboxes/embed_lightbox.coffee @ 1471295862 */
(function(){Scribd.UI||(Scribd.UI={}),Scribd.UI.CustomSize=function(){function t(t,e,n){_.bindAll(this),this.embed_ui=t,this.container=$(e),this.book_mode=!1,this.options=_.extend({min_width:400,min_height:300,aspect_ratio:.75},n||{}),this.lock_aspect_ratio=!0,this.width_input=this.container.find(".custom_width"),this.height_input=this.container.find(".custom_height"),this.update_from_width=this.updater_for("width"),this.update_from_height=this.updater_for("height"),this.width_input.on("change",this.update_from_width),this.height_input.on("change",this.update_from_height),this.lock_button=this.container.find(".lock_button"),this.lock_button.on("click",function(t){return function(){return t.lock_button.toggleClass("unlocked"),t.lock_aspect_ratio=!t.lock_aspect_ratio,t.lock_aspect_ratio&&0===!t.width_input.val().length?t.update_from_width():void 0}}(this))}return t.prototype.values=function(){return[parseInt(this.width_input.val(),10),parseInt(this.height_input.val(),10)]},t.prototype.has_values=function(){return 0===!this.width_input.val().length&&0===!this.height_input.val().length},t.prototype.updater_for=function(t){var e,n,i,r,o,s;return r="width"===t?"height":"width",e=this.options.aspect_ratio,"height"===t&&(e=1/e),n=this[t+"_input"],o=this[r+"_input"],i="min_"+t,s="min_"+r,function(a){return function(){var c,l;if(0!==n.val().length)return a.book_mode&&(e=1/e),l=parseInt(n.val(),10),l<a.options[i]&&(l=a.options[i],n.val(l)),c=void 0,a.lock_aspect_ratio||0===o.val().length?(c=Math.max(Math.floor(l/e),a.options[s]),o.val(c)):c=a.embed_ui.custom_options[r],"width"===t?a.embed_ui.set_size(l,c):a.embed_ui.set_size(c,l)}}(this)},t}(),Scribd.UI.EmbedDialog=function(){function t(t){var e,n;_.bindAll(this),this.container=$(t),this.document=this.container.data("document"),(e=this.document).aspect_ratio||(e.aspect_ratio=.75),this.options={num_pages:this.document.page_count,aspect_ratio:this.document.aspect_ratio,doc_url:this.document.url,title:this.document.title,user_url:this.document.word_user.url,user_title:this.document.word_user.name,doc_id:this.document.id,access_key:this.document.access_key,secret_password:this.document.secret_password},this.input=this.container.find(".code_input"),this.preview_container=this.container.find(".doc_preview"),this.custom_options={},this.generators={html:new Scribd.Embed.HTML5CodeGenerator(_.clone(this.options)),wordpress:new Scribd.Embed.WordpressCodeGenerator(_.clone(this.options))},this.container.find(".content").css("padding",0),this.starting_page=this.container.find(".misc_options .starting_page"),this.container.find(".custom_size input").add(this.starting_page).restrict_numeric({allow_period:!1}),this.custom_size=new Scribd.UI.CustomSize(this,this.container.find(".custom_size")),this.starting_page.on("change",function(t){return function(){var e,n;return n=0===t.starting_page.val().length?1:parseInt(t.starting_page.val(),10),e=t.options.num_pages,null!==e&&0!==e&&n>e&&(n=e,t.starting_page.val(n)),t.custom_options.page=n,t.update_code()}}(this)),this.container.on("change",".view_style",function(t){return function(e){var n;return n=$(e.currentTarget).val(),t.custom_options.mode=n,t.update_code()}}(this)),this.input.select_on_focus(),this.container.find(".include_link_input").on("change",function(t){return function(e){return t.custom_options.show_title=$(e.target).prop("checked"),t.update_code(),!0}}(this)),this.container.find(".include_recommendations_input").on("change",function(t){return function(e){return t.custom_options.show_recommendations=$(e.target).prop("checked"),t.update_code(),!0}}(this)),this.container.on("click",".close",function(){return function(){return Scribd.Lightbox.close()}}(this)),this.container.on("click","#embed_format",function(t){return function(e){var n;return n=$(e.target),n.hasClass("inactive")?(n.removeClass("inactive"),t.container.find(".option.active").removeClass("active").addClass("inactive"),n.addClass("active"),t.update_format(n.data("format"))):void 0}}(this)),n=this.container.find(".size_picker"),n.find("li").on("click",function(t){return function(e){var i,r,o,s,a;return r=$(e.target).parent("li").andSelf().filter("li"),r&&(n.find("li").removeClass("active"),r.addClass("active"),s=r.data("size"),s?(a=null,i=null,o=s.match(/(\d+)x(\d+)/),o&&(a=o[1],i=o[2]),t.set_size(a,i)):t.custom_size.has_values()&&t.set_size.apply(t,t.custom_size.values())),!1}}(this)),this.update_format("html"),this.setup_copy_link()}return t.prototype.set_size=function(t,e){return t!==this.custom_options.width||e!==this.custom_options.height?(this.custom_options.width=t,this.custom_options.height=e,this.custom_options.auto_width=!t,this.custom_options.auto_height=!e,this.update_code()):void 0},t.prototype.update_format=function(t){return this.current_format=t,this.update_code()},t.prototype.update_code=function(t){var e;return"book"===this.custom_options.mode?this.showing_book||(this.showing_book=!0,this.custom_size.book_mode=!0,this.toggle_sizes()):this.showing_book&&(this.showing_book=!1,this.custom_size.book_mode=!1,this.toggle_sizes()),this.input.val(this.generators[this.current_format].render(this.custom_options)),e=this.generators.html.render(),this.preview_container.show().html(e),_.defer(function(t){return function(){var e;return t.custom_options.auto_height&&t.custom_options.auto_width?(e={width:t.preview_container.width(),height:t.preview_container.height()},t.preview_container.find(".scribd_iframe_embed").css(e)):void 0}}(this)),t?void 0:this.flash()},t.prototype.toggle_sizes=function(){return $(".size_picker:first").children().toggleClass("hidden"),$(".custom_size:first").removeClass("hidden")},t.prototype.flash=function(){var t;return t=this.container.find(".tab_bodies input").flash()},t.prototype.setup_copy_link=function(){var t,e,n,i;return t=this.container.find(".copy_link"),i=t.find(".document_url_input"),e=t.find("form"),i.on("click",function(){return function(){return i[0].select()}}(this)),("undefined"!=typeof docManager&&null!==docManager?docManager.firstVisiblePage:void 0)||t.find(".position_picker").remove(),n=function(t){return function(){var n,r,o,s,a,c,l,u,d;for(s={},c=e.serializeArray(),n=0,r=c.length;r>n;n++)l=c[n],o=l.name,d=l.value,s[o]=d;return a={},"current"===s.doc_position&&(a.page=docManager.firstVisiblePage.pageNum),s.fullscreen&&(a.fullscreen=1),u=t.options.doc_url,$.isEmptyObject(a)||(u+="#"+$.param(a)),i.val(u)}}(this),e.on("change",function(){return function(){return n()}}(this)),n()},t}()}).call(this);


/* app/views/pdfs/lightboxes/flag_doc_lightbox.coffee @ 1471295862 */
(function(){Scribd.FlagDocDialog=function(){function t(t){this.container=$(t).on("submit",function(t){return function(){return t.container.addClass("loading")}}(this)).on("ajax:complete",function(t){return function(){return t.container.removeClass("loading"),Scribd.Lightbox.close()}}(this))}return t}()}).call(this);


/* app/views/pdfs/lightboxes/_print_lightbox.coffee @ 1471295862 */
(function(){var t,e,n,i,r,o;i=React.DOM,e=i.div,r=i.span,n=i.p,t=Scribd.R.component_builder("Pdfs.Lightboxes.PrintLightbox",{css_class:"autogen_class_views_pdfs_lightboxes_print_lightbox",track_category:"print_dialog"}),o=React.PropTypes,t({propTypes:{download_fn:o.func.isRequired},widget_css_classes:function(t){return classNames(t,"lightbox")},render:function(){return e({className:"wrapper",children:[e({className:"close_button"},r({className:"icon-close"})),e({className:"title"},"Print document"),e({className:"content",children:[n({},"In order to print this document from Scribd you'll first need to download it."),e({className:"buttons"},this.common_button({className:"download_btn",onClick:this.props.download_fn},"Download and print"))]})]})}})}).call(this);


/* app/views/pdfs/lists/_tracked_footer_carousel.coffee @ 1471295862 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.TrackedFooterCarousel=function(e){function n(){n.__super__.constructor.apply(this,arguments),Scribd.RecommendationTracking.page_view_deferred(this.opts.compilation_id).done(function(t){return function(e){return t.container.trigger("scribd:setup_tracking",[e,"footer"])}}(this))}return t(n,e),n}(Scribd.UI.Carousel)}).call(this);


/* app/views/pdfs/_seo_banner.coffee @ 1471295862 */
(function(){Scribd.SeoBanner=function(){function t(t,e){var n;null==e&&(e={}),this.container=$(t),this.variation=Scribd.SeoShared.seo_variation(),Scribd.pdfs_show.render(),this.container.track({action:"show",label:"seo_banner"}),$(document.body).track_rats("doc:bottom_banner:show"),n=Scribd.SeoShared.banner_variation(),this.render_text_copy(n),this.container.dispatch("click",{subscribe_btn:function(){return function(){return $(document.body).track_rats("doc:subscribe_button:click",{location:"bottom banner"}),Scribd.SignIn.open({initial_view:"join_archive",next_url:e.subscribe_url,track_location:"seo_banner"})}}(this),seo_banner:function(){return function(){return Scribd.logged_in?window.open(e.plans_landing_url):Scribd.SignIn.open({initial_view:"join_archive",next_url:e.subscribe_url,track_location:"seo_banner"})}}(this)})}return t.prototype.render_text_copy=function(t){var e,n,i,r;return r=Scribd.SeoBannerTextDictionary.data(),i=r.value_prop[t.value_prop],e=r.cta[t.cta],n=r.fine_print[t.fine_print],this.container.find(".seo_banner_header").text(i.header),this.container.find(".seo_banner_sub_header").text(i.sub_header),this.container.find(".seo_banner_cta_button").text(e),n?(this.container.find(".button_area").addClass("has_under_cta"),this.container.find(".seo_banner_under_cta").text(n)):void 0},t}()}).call(this);


/* app/views/pdfs/_seo_lightbox.coffee @ 1471295862 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.SeoLightbox=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.setup_carousel(this.container.find(".seo_images")),this.setup_events(),this.setup_signup()}return t(n,e),n.prototype.setup_carousel=function(t){var e;return t=$(t),e=$("<div class='scroller'></div>"),e.append(t.children().detach()),t.append(e)},n.prototype.setup_events=function(){return this.variation=Scribd.SeoShared.seo_variation(),this.container.attr("data-track_category","seo_lightbox:"+this.variation),this.container.dispatch("click",{close_button:function(t){return function(){return t.close()}}(this),start_trial_btn:function(t){return function(){return t.start_trail()}}(this)}),this.container.on("Scribd:lightbox:closed",function(t){return function(){return t.container.track({action:"close",label:"close"})}}(this)),this.container.on("Scribd:Facebook:login_success",function(t){return function(){return Scribd.Lightbox.open("login_successful_lb"),t.redirect_to_billing()}}(this)),this.container.on("scribd:signup_error:email_taken",function(t){return function(){return t.signup.find(".signup .input_error").text("That email is already taken."),t.signup.find(".signup .email_input").addClass("input_err field_err")}}(this)),this.container.track({action:"show",label:"show"})},n.prototype.setup_signup=function(){return this.signup=this.container.find(".seo_signup"),0===this.signup.length?void(this.signup=null):(this.signup.html(this.signup.html().replace(/DocPromoOne/g,this.campaign())),new Scribd.LoginForms(this.signup),new Scribd.FacebookLoginButton(this.signup.find(".facebook_login_button")))},n.prototype.campaign=function(){switch(this.variation){case"control":case"new_control":return"DocPromoOne";case"new_basic":return"DocPromoTwo";case"new_doc_only_subscribe":return"DocPromoFour";case"new_doc_only_archive":return"DocPromoFive"}},n.prototype.redirect_to_subscribe=function(){var t,e,n;return t=this.campaign(),this.variation.match(/archive/)?(e=encodeURIComponent(JSON.stringify({page:"archive_plans",context:"archive",action:t,logged_in:Scribd.logged_in,platform:"web"})),window.open("/archive/plans?metadata="+e+"&doc="+(null!=(n=Scribd.current_doc)?n.id:void 0))):window.open("/subscribe?action="+t)},n.prototype.redirect_to_billing=function(){return window.location=this.signup.find('[name="login_params[next_url]"]').val()},n.prototype.show_signup=function(){return this.signup.addClass("open"),setTimeout(function(t){return function(){return t.signup.find(".signup .username_input").focus()}}(this),200)},n.prototype.start_trail=function(){return $(document.body).track_rats("doc:subscribe_button:click",{location:"lightbox"}),null!=this.signup?Scribd.logged_in?this.redirect_to_billing():this.show_signup():this.redirect_to_subscribe()},n}(Scribd.Lightbox)}).call(this);


/* app/views/pdfs/show.coffee @ 1471295862 */
(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(t,e){var n;return n=navigator.platform.match(/Mac/),$(document).keydown(function(){return function(i){return i.keyCode===t.charCodeAt(0)&&(n&&i.metaKey||!n&&i.ctrlKey)?e(i):void 0}}(this))},Scribd.PdfsShow=function(){function n(t,n){var i;this.opts=n,this.track_performance=e(this.track_performance,this),this.container=$(t),this.setup_events(),this.fullscreen=!1,this.document=$.extend(this.opts.document,{total_pages:this.get_highest_page()}),this.render(),this.setup_sharing(),window.docManager&&(this.highlighter=new Scribd.PdfHighlighter(this.container)),this.setup_sizing(),this.fetch_data(),this.setup_ad_repopulation(),this.setup_sticky_footer(),this.setup_seo_roadblock(),this.setup_embed_referral(),this.setup_print_detection(),this.setup_find_hotkey(),this.setup_buy_manager(),this.track_performance(),this.send_tracking(),this.setup_reading_progress(),Scribd.hook_tooltips(this.container.parent()),i=window.location.hash.match(/\bdownload\b/),i&&_.defer(function(t){return function(){return t.download_document("url")}}(this)),$(document.body).on("scribd:credit_redeemed",function(){return document.location.reload()})}return n.min_zoom=.3,n.max_zoom=3,n.initialize_ads=function(t){var e;return t.size_mapping_for_unit=n.ad_size_mapping_for_unit,null!=(e=Scribd.Ads)?e.initialize(t):void 0},n.ad_size_mapping_for_unit=function(t){return t.match(/^(Doc_Between_|Doc_Top_Leaderboard_ATF)/)?googletag.sizeMapping().addSize([1100,0],[[728,90]]).addSize([0,0],[[468,60]]).build():void 0},n.prototype.track_performance=function(){return $(window).on("load",function(){return function(){return window.performance?_.defer(function(){var t,e,n;return t=performance.timing.domInteractive-performance.timing.navigationStart,e=performance.timing.loadEventEnd-performance.timing.navigationStart,n=performance.timing.loadEventEnd-performance.timing.responseEnd,$(document.body).track_rats("doc:performance",{dom_interactive:t,load_event_end:e,response_end:n})}):void 0}}(this))},n.prototype.setup_sizing=function(){var t,e;return t=this.container.find(".document_scroller"),e=60,this.update_page_width=function(n){return function(){var i,r,o;return i=n.fullscreen?1300:1e3,r=Math.min(i,t.width()-e),"undefined"!=typeof docManager&&null!==docManager&&null!=(o=docManager._currentViewManager)?o._setWidth(r):void 0}}(this),this.refresh_pages=function(t){return function(){return t.update_page_width(),setTimeout(function(){return docManager._updatePageBoundingRects(),docManager._currentViewManager.checkAndUpdateVisiblePages()},100)}}(this),this.update_page_width(),$(window).on("resize",_.debounce(function(t){return function(){return t.update_page_width()}}(this),20))},n.prototype.send_tracking=function(){return this.opts.pmp_data&&"function"==typeof $rat&&$rat("pmp_read",this.opts.pmp_data),"function"==typeof $rat&&$rat("doc_view_mode",{value:"doc_view_mode",doc_id:Scribd.current_doc.id}),"undefined"!=typeof $rat&&null!==$rat&&$rat.root().flushEvents(),this.opts.pingback_url?Scribd.send_pingback(this.opts.pingback_url):void 0},n.prototype.fetch_data=function(){var t,e;return t=$(document.body),e=this.opts.data_url,_.isArray(e)&&(e=e.join("")),$.get(e).done(function(){return function(e){return t.toggleClass("buy_disabled",!!e.disabled_store_sale&&Scribd.current_doc.is_paid),t.toggleClass("pmp_disabled",!!e.disabled_pmp_sale&&Scribd.current_doc.is_pmp)}}(this))},n.prototype.setup_sticky_footer=function(){var t,e;return t=this.container.find(".document_footer"),e=t.closest(".document_scroller"),e.on("scroll",function(){return function(){return t.css({marginLeft:e.scrollLeft()+"px"})}}(this))},n.prototype.setup_sharing=function(){var t,e,n,i,r,o;o=this.container.find(".sharing_buttons"),n=o.data("sharing_opts"),new Scribd.SharingButtons(o,n),r={"scribd:share:email":"doc:share_via_email_button:click","scribd:share:facebook":"doc:share_via_facebook_button:click","scribd:share:twitter":"doc:share_via_twitter_button:click","scribd:share:googleplus":"doc:share_via_googleplus_button:click","scribd:share:pinterest":"doc:share_via_pinterest_button:click"},e=function(t){return function(e,n){return t.container.on(e,function(){return $(document.body).track_rats(n)})}}(this);for(t in r)i=r[t],e(t,i);return this.container.dispatch("click",{embed_btn:function(){return function(t){return $(document.body).track_rats("doc:embed_button:click"),Scribd.Lightbox.remote_open("embed_dialog",t.data("lightbox_url"))}}(this),flag_document_btn:function(){return function(t){return $(document.body).track_rats("doc:flag_button:click"),Scribd.with_login({initial_view:"login",login_header_text:"Sign in to flag this title"},function(){return Scribd.Lightbox.remote_open("lightbox_flag_document",t.data("lightbox_url"))})}}(this)})},n.prototype.setup_find_hotkey=function(){return t("F",function(t){return function(){var e;return e=t.toolbar.container().find(".search_input"),e.length?(e.focus(),!1):void 0}}(this))},n.prototype.setup_print_detection=function(){var e;if(Scribd.current_doc.downloadable_for_premium_users)return"function"==typeof window.matchMedia&&window.matchMedia("print").addListener(_.debounce(function(t){return function(){return t.print_document()}}(this),3e3,!0)),e=window.onbeforeprint,window.onbeforeprint=function(t){return function(){return t.print_document(),"function"==typeof old_onbeforeprint&&old_onbeforeprint(),!1}}(this),t("P",function(t){return function(){return t.print_document(),!1}}(this))},n.prototype.get_highest_page=function(){var t,e,n;if(!window.docManager)return 0;if(t=null!=(n=Scribd.current_doc)?n.page_count:void 0,!t){t=0;for(e in docManager.pages)t=Math.max(t,e)}return t},n.prototype.render=function(){return window.docManager?(this.current_zoom=docManager._currentViewManager._currentZoomMultiplier,this.render_toolbar(),this.container.toggleClass("fullscreen",this.fullscreen)):void 0},n.prototype.render_toolbar=function(){return this.toolbar_drop||(this.toolbar_drop=this.container.find(".toolbar_drop")),this.toolbar=ReactDOM.render(Scribd.R.Pdfs.Toolbar({document:this.document,fullscreen:this.fullscreen,current_zoom:this.current_zoom,current_page:this.current_page||1,search_results:this.search_results,highlight_callback:function(t){return function(e,n){return t.highlighter.clear(),t.highlighter.highlight_from_results(e,n)}}(this)}),this.toolbar_drop[0])},n.prototype.setup_app_download_link_in_viewport_tracking=function(){return $(".download_app_promo_lightbox").one("inview",function(t,e){return e?($(this).track_rats("download_app_promo:text_link:view",{doc_id:Scribd.current_doc.id}),$(this).off("inview")):void 0})},n.prototype.setup_events=function(){var t;return this.setup_app_download_link_in_viewport_tracking(),"undefined"!=typeof docManager&&null!==docManager&&docManager.addEvent("expectedFirstPageChanged",function(t){return function(e){var n;return t.current_page=e,t.render(),(n=t.going_to_page)?(delete t.going_to_page,n.to_page=""+e,$(document.body).track_rats("doc:pager:engage",n)):void 0}}(this)),this.container.on("click",".trial_learn_more_btn",function(){return function(){$(document.body).track_rats("doc:subscribe_button:click",{location:"top bar banner"})}}(this)),this.container.dispatch("click",{more_description_btn:function(t){return function(){var e;return e=t.container.find(".collapse_data"),$(document.body).track_rats("doc:more_information_button:click",{action:e.is(".show_more")?"hide":"show"}),e.toggleClass("show_more")}}(this),download_btn:function(t){return function(){return t.download_document("sidebar")}}(this),download_app_promo_lightbox:function(t){return function(){return t.container.track_rats("download_app_promo:text_link:click",{doc_id:Scribd.current_doc.id}),Scribd.Lightbox.open("app_download_promo_lightbox")}}(this),trial_learn_more_btn:function(t){return function(){return Scribd.SignIn.open({initial_view:"join_archive",next_url:t.opts.subscribe_url,track_location:"learn_more"})}}(this)}),$(document.body).on("scribd:unpause_account",function(t){return function(){return t.container.removeClass("has_toolbar_nag")}}(this)),t=function(t){return function(e){return $(document.body).track_rats("doc:zoom_"+e+"_button:click",{to_zoom_level:Math.floor(100*t.current_zoom)+"%"})}}(this),Scribd.R.dispatch(this.container,{"toolbar:goto_page":function(t){return function(e,n,i){var r,o;return null==i&&(i=!1),r=n>t.current_page?1:-1,o=docManager.getClosestPageNumber(n,r),i||(t.going_to_page={text:""+n,from_page:""+(t.current_page||1)}),docManager.gotoPage(o,{direction:r})}}(this),"toolbar:zoom_in":function(e){return function(){return e.current_zoom>=e.constructor.max_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(1.25),e.render(),t("in"))}}(this),"toolbar:zoom_out":function(e){return function(){return e.current_zoom<=e.constructor.min_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(.8),e.render(),t("out"))}}(this),"toolbar:download":function(t){return function(){return t.download_document(t.fullscreen?"toolbar right fullscreen":"toolbar right default")}}(this),"toolbar:print":function(t){return function(){return $(document.body).track_rats("doc:print_button:click"),t.print_document()}}(this),"toolbar:fullscreen":function(t){return function(){return $(document.body).track_rats("doc:fullscreen_button:click",{action:t.fullscreen?"exit fullscreen":"fullscreen"}),t.set_fullscreen(!t.fullscreen)}}(this),"toolbar:clear_search":function(t){return function(){return t.highlighter.clear()}}(this),"toolbar:goto_search_result":function(t){return function(e,n,i){var r,o,s;return(o=t.last_search_results[n])?(i||$(document.body).track_rats("doc:search_doc_result:click",{index:n}),s=_.filter(t.last_search_results,function(t){return t.pageNum===o.pageNum}),r=_.indexOf(s,o),t.highlighter.select_result(o.pageNum,r)):void 0}}(this),"toolbar:search":function(t){return function(e,n){return $(document.body).track_rats("doc:search_doc:engage",{text:n}),$.post(t.document.toolbar.search_url,{query:n}).done(function(e){return t.last_search_results=e,t.toolbar.set_search_results(n,e)})}}(this)})},n.prototype.set_fullscreen=function(t){return this.fullscreen=t,this.render(),this.refresh_pages()},n.prototype.print_document=function(){return $(document.body).track_rats("doc:print_modal:show"),Scribd.Lightbox.open_react("print_document_lb",Scribd.R.Pdfs.Lightboxes.PrintLightbox({download_fn:function(t){return function(){return t.download_document("print modal")}}(this)}))},n.prototype.download_document=function(t){return t&&$(document.body).track_rats("doc:download_button:click",{location:t}),Scribd.Lightbox.show_loading(),Scribd.download_actions.download(this.document.id,"read","toolbar_download",function(t){return function(){return $.post(t.document.download_url).done(function(e){return $(document.body).track_rats("doc:download_modal:show"),e.props.download_url=t.document.download_url,Scribd.Lightbox.open_react("document_download_lb",Scribd.R.Pdfs.Lightboxes.DownloadLightbox(e.props))})}}(this))},n.prototype.setup_ad_repopulation=function(){var t,e;return null!=(t=Scribd.Ads)&&null!=(e=t.deferred())?e.done(function(){return function(){var t,e,n,i,r,o;if(Scribd.Ads.attributes.AdLayout[0]>=4){for(r={},n=function(){var t,e;for(e=[],o=t=3;21>=t;o=t+=2)e.push(o);return e}(),t=0,e=n.length;e>t;t++)i=n[t],r[i]=i;return docManager.addEvent("expectedFirstPageChanged",function(t){var e,n,i,o,s;return e=t>2?t%20===1?21:t%20:void 0,i=r[e],null!=i&&i!==t?(o=$("#between_page_ads_"+t),o.height("90px"),s=$("#between_page_ads_"+e),e!==t&&s.height("0px"),n=$("#between_page_ads_inner_"+e),n.css("top",o.position().top+"px"),r[e]=t):void 0})}}}(this)):void 0},n.prototype.setup_reading_progress=function(){var t,e,n,i;return t=null!=(e=window.location.hash.match(/\bpage=(\d+)/))?e[1]:void 0,t||(t=null!=(n=Scribd.current_doc)&&null!=(i=n.reading_progress)?i.offset:void 0),new Scribd.ReadingProgress.Pdf({scroll_node:DocumentManager.scrollParent,total_pages:this.opts.document.total_pages}),docManager.view_manager_deferred.then(function(e){return function(){var n;return n=window.location.hash.match(/\bfullscreen\b/),t&&+t>1&&!Scribd.ReadingProgress.PastPreviewLightbox.should_be_shown()&&docManager.gotoPage(+t),n?_.defer(function(){return e.set_fullscreen(!0)}):void 0}}(this)),$(window).on("scribd:external_reading_progress",function(){return function(t,e){return docManager.gotoPage(+e.offset+1)}}(this))},n.prototype.setup_embed_referral=function(){var t,e;return e=window.location.hash.search(/from_embed/)>0,t=$("#seo_banner_template"),e&&t.length>0?_.defer(function(t){return function(){return t.show_seo_banner()}}(this)):void 0},n.prototype.setup_seo_roadblock=function(){return window.docManager&&Scribd.SeoShared.setup_assignment()&&(_.defer(function(t){return function(){return t.show_seo_banner()}}(this)),!this.opts.view_restricted)?ouibounce(!1,{callback:function(){return function(){var t,e,n;if(!Scribd.Lightbox.current_open)return n=Scribd.SeoShared.seo_variation(),e="seo_roadblock_lb_"+n,t=Scribd.Lightbox.open(e,Scribd.SeoLightbox)}}(this)}):void 0},n.prototype.show_seo_banner=function(){var t;if(!this.hide_for_www_test()&&!this.container.is(".has_seo_banner"))return t=this.container.find(".seo_banner_drop"),t.html($("#seo_banner_template").data("content")),this.container.addClass("has_seo_banner")},n.prototype.setup_buy_manager=function(){var t;return t=Scribd.BuyDocManager.for_current_doc(),this.container.find(".primary_buy_btn").attr("href",t.buy_url)},n.prototype.hide_for_www_test=function(){return Scribd.SeoShared.eligible_for_www_test()?(this.remove_trial_upsell(),!0):!1},n.prototype.remove_trial_upsell=function(){var t;return t=this.container.find(".trial_upsell"),t.remove()},n}()}).call(this);


/* app/views/pdfs/_sidebar.coffee @ 1471295862 */
(function(){}).call(this);


/* app/views/pdfs/sidebar/_admin_panel.coffee @ 1471295862 */
(function(){Scribd.ReadPageAdmin=function(){function t(t){var e;this.container=$(t),e=!0,this.container.dispatch("click",{toggle_admin_btn:function(t){return function(){return t.container.toggleClass("open")}}(this)})}return t}()}).call(this);


/* app/views/pdfs/_sidebar_paginator.coffee @ 1471295862 */
(function(){var t,e,n,i,r;i=React.DOM,n=i.div,t=i.a,e=Scribd.R.component_builder("Pdfs.SidebarPaginator",{css_class:"autogen_class_views_pdfs_sidebar_paginator"}),r=React.PropTypes,e({propTypes:{num_pages:r.number},getInitialState:function(){return{current_page:1}},widget_css_classes:function(t){return classNames(t,"related_pager")},goto_page:function(t){return this.setState({current_page:t}),this.trigger("sidebar:goto_page",t)},render:function(){return 1!==this.props.num_pages?[n({className:"pager_navigate",children:[t({className:classNames({active:1!==this.state.current_page}),herf:"javascript:void(0)",onClick:function(t){return function(e){return $(e.target).is(".active")?(e.preventDefault(),t.goto_page(Math.max(1,t.state.current_page-1))):void 0}}(this)},"Previous"),n({className:"bar"}),t({className:classNames({active:this.state.current_page!==this.props.num_pages}),herf:"javascript:void(0)",onClick:function(t){return function(e){return $(e.target).is(".active")?(e.preventDefault(),t.goto_page(Math.min(t.props.num_pages,t.state.current_page+1))):void 0}}(this)},"Next")]}),n({className:"related_current_page"},"Page "+this.state.current_page+" of "+this.props.num_pages)]:void 0}})}).call(this);


/* app/views/pdfs/_ssi_recommendations.coffee @ 1471295862 */
(function(){Scribd.PdfsSsiRecommendations=function(){function t(t,e){this.opts=e,this.container=$(t),this.setup_sidebar(),this.setup_footer_docs()}return t.prototype.setup_sidebar=function(){return this.setup_sidebar_tracking(),Scribd.R.dispatch(this.container,{"sidebar:goto_page":function(t){return function(e,n){var i;return i=t.container.find(".sidebar_rec_docs .documents_page"),i.removeClass("visible").eq(n-1).addClass("visible"),t.track_visible_sidebar()}}(this)})},t.prototype.setup_footer_docs=function(){var t,e,n,i,r,o;for(this.footer_docs=this.container.find(".footer_rec_docs"),e=this.container.closest(".document_columns_wrapper").find(".footer_recommended_docs_drop"),e.replaceWith(this.footer_docs),r=this.footer_docs.find("[data-recommender_init]"),o=[],n=0,i=r.length;i>n;n++)t=r[n],t=$(t),o.push(new Scribd.TrackedFooterCarousel(t,t.data("recommender_init")));return o},t.prototype.setup_sidebar_tracking=function(){var t,e;if(null!=(t=this.opts.sidebar)?t.compilation_id:void 0)return e=this.opts.sidebar,new Scribd.RecommendationTracking.Module(this.container,{compilation_id:e.compilation_id,module_id:e.module_id,widget_name:"sidebar",on_tracking:function(t){return function(e){t.tracking=e}}(this),on_in_view:function(t){return function(){return t.track_visible_sidebar()}}(this)})},t.prototype.track_visible_sidebar=function(){var t,e,n,i,r,o,s;if(this.tracking){for(s=this.container.find(".sidebar_rec_docs .documents_page.visible"),r=s.find(".document_cell"),o=[],e=0,n=r.length;n>e;e++)t=r[e],t=$(t),t.is(".visibility_tracked")||(i=t.data("track_uuid"),Scribd.RecommendationTracking.track_obj_view(this.tracking.view_id,i),o.push(t.addClass("visibility_tracked")));return o}},t}()}).call(this);


/* app/views/pdfs/_toolbar.coffee @ 1471295862 */
(function(){var t,e,n,i,r,o,s,a,c,l,u,d=[].slice;a=React.DOM,r=a.input,n=a.div,t=a.a,c=a.span,i=a.form,o=a.label,l=a.strong,s=a.p,e=Scribd.R.component_builder("Pdfs.Toolbar",{css_class:"autogen_class_views_pdfs_toolbar"}),u=React.PropTypes,e({propTypes:{fullscreen:u.bool.isRequired,current_zoom:u.number.isRequired,current_page:u.number.isRequired,highlight_callback:u.func,document:u.shape({is_downloadable:u.bool,total_pages:u.number.isRequired,toolbar:u.shape({sections:u.array,search_url:u.string}).isRequired}).isRequired},getInitialState:function(){return{table_of_contents_open:!1,search_results_open:!1,search_results:void 0,search_active:!1,selected_search_result:void 0,search_input:"",changing_to_page:null}},componentDidMount:function(){return $(document.body).on("click",function(t){return function(e){var n;return t.state.search_results_open&&(n=$(e.target).closest(t.refs.search_wrapper),n.length||t.setState({search_results_open:!1})),t.state.table_of_contents_open&&(n=$(e.target).closest(t.refs.toc_wrapper),!n.length)?t.setState({table_of_contents_open:!1}):void 0}}(this))},componentDidUpdate:function(t,e){return this.state.search_active&&!e.search_active?Scribd.init_spinners(this.container()):void 0},set_search_results:function(t,e){var n;if(t===this.state.last_search_query)return"function"==typeof(n=this.props).highlight_callback&&n.highlight_callback(t,e),e.length>0&&this.trigger("toolbar:goto_search_result",0,!0),this.setState({search_results:e,search_results_open:!0,search_active:!1,table_of_contents_open:!1,selected_search_result:e[0]&&0})},render:function(){return[n({className:"left_tools",children:this.render_left_tools()}),n({className:"right_tools",children:this.render_right_tools()}),n({className:"center_tools",children:this.render_center_tools()})]},render_left_tools:function(){return[this.props.fullscreen?t({href:"/",className:"toolbar_scribd_logo"}):void 0,this.props.document.toolbar.sections?n({ref:"toc_wrapper",className:"toc_wrapper",children:[n({"data-tooltip":"Table of contents",className:classNames("toc_btn icon-toc","toolbar_btn",{active:this.state.table_of_contents_open}),onClick:function(t){return function(){return $(document.body).track_rats("doc:table_of_contents_button:click",{action:t.state.table_of_contents_open?"hide":"show"}),t.setState({table_of_contents_open:!t.state.table_of_contents_open,search_results_open:!1})}}(this)}),this.state.table_of_contents_open?this.render_toc():void 0]}):void 0,this.props.document.toolbar.search_url?n({ref:"search_wrapper",className:"search_wrapper",children:[this.render_search(),this.state.search_results_open&&this.state.search_results?this.render_search_results():void 0]}):void 0]},render_center_tools:function(){var t,e,i;return t=_.string.numberFormat,i=this.props.current_zoom<=Scribd.PdfsShow.min_zoom,e=this.props.current_zoom>=Scribd.PdfsShow.max_zoom,[n({className:"toolbar_pager",children:[r({type:"text",className:"page_input",value:null!=this.state.changing_to_page?this.state.changing_to_page:this.props.current_page,onFocus:function(){return function(){return $(document.body).track_rats("doc:pager:click")}}(this),onBlur:function(t){return function(e){var n;if(null!=t.state.changing_to_page)return e.target.value.match(/\d/)&&(n=parseInt(e.target.value,10),n!==t.props.current_page&&t.trigger("toolbar:goto_page",n)),t.setState({changing_to_page:null})}}(this),onKeyDown:function(t){return function(e){if(t.state.changing_to_page)switch(e.keyCode){case 13:return t.trigger("toolbar:goto_page",parseInt(e.target.value,10)),t.setState({changing_to_page:null});case 27:return t.setState({changing_to_page:null})}}}(this),onChange:function(t){return function(e){return t.setState({changing_to_page:e.target.value})}}(this)}),c({className:"total_pages"},"of "+t(this.props.document.total_pages))]}),n({"data-tooltip":"Zoom in",className:classNames("toolbar_btn zoom_btn icon-zoom-in-default",{disabled:e}),onClick:function(t){return function(){return e?void 0:t.trigger("toolbar:zoom_in")}}(this)}),n({"data-tooltip":"Zoom out",className:classNames("toolbar_btn zoom_btn icon-zoom-out-default",{disabled:i}),onClick:function(t){return function(){return i?void 0:t.trigger("toolbar:zoom_out")}}(this)})]},render_right_tools:function(){return[this.props.document.is_downloadable?this.props.fullscreen?this.common_button({onClick:function(t){return function(){return t.trigger("toolbar:download")}}(this)},"Download"):n({"data-tooltip":"Download",className:"toolbar_btn icon-download",onClick:function(t){return function(){return t.trigger("toolbar:download")}}(this)}):void 0,this.props.document.is_downloadable?n({"data-tooltip":"Print",className:"toolbar_btn icon-print",onClick:function(t){return function(){return t.trigger("toolbar:print")}}(this)}):void 0,n({"data-tooltip":this.props.fullscreen?"Exit fullscreen":"Fullscreen",className:classNames("toolbar_btn",{"icon-ic_fullscreen":!this.props.fullscreen,"icon-fullscreen_collapse":this.props.fullscreen}),onClick:function(t){return function(){return t.trigger("toolbar:fullscreen")}}(this)})]},render_search:function(){return i({className:classNames("doc_search",{focused:this.state.search_focused,open:this.state.search_results_open,has_text:""!==this.state.search_input}),action:this.props.document.toolbar.search_url,onSubmit:function(t){return function(e){var n;return e.preventDefault(),n=$(t.refs.search_input).val(),n.match(/^\s*$/)?void t.setState({search_results_open:!1}):(n=n.match(/^\s*(.*?)\s*$/)[0],n!==t.state.last_search_query?(t.trigger("toolbar:search",n),t.setState({search_active:!0,search_results_open:!1,last_search_query:n,search_results:void 0,selected_search_result:void 0})):void 0)}}(this),children:[o({children:[n(this.state.search_active?{className:"scribd_spinner","data-size":20}:{className:"search_icon icon-search"}),r({type:"text",ref:"search_input",placeholder:"Search document",className:"search_input",value:this.state.search_input,onChange:function(t){return function(e){return t.setState({search_input:e.target.value})}}(this),onBlur:function(t){return function(e){return t.setState({search_focused:!1}),e.target.value!==t.state.last_search_query?t.trigger("toolbar:clear_search"):void 0}}(this),onFocus:function(t){return function(e){return t.setState({search_focused:!0}),$(document.body).track_rats("doc:search_doc:click"),t.state.search_active||!t.state.search_results||t.state.search_results_open||e.target.value!==t.state.last_search_query?void 0:t.setState({search_results_open:!0})}}(this),onKeyDown:function(t){return function(e){return 27===e.keyCode?t.state.search_results_open?t.setState({search_results_open:!1,last_search_query:null}):t.state.search_active&&t.state.last_search_query?t.setState({search_active:!1,last_search_query:null}):(t.trigger("toolbar:clear_search"),t.setState({search_input:""})):void 0}}(this)}),""!==this.state.search_input?n({className:"search_close_icon icon-close",onClick:function(t){return function(){return t.setState({search_input:"",search_active:!1,search_results_open:!1,last_search_query:null}),t.trigger("toolbar:clear_search")}}(this)}):void 0]})]})},render_search_results:function(){var e,i,r,o,s;return i=_.string.numberFormat,o=this.state.last_search_query,s=this.state.search_results.filter(function(t){return!!t.snippet}),e=s.length,r=function(t,e,n){return i(t)+" "+(1===t&&e||n)},n({className:classNames("search_results results_popup",{empty:0===e}),children:[n({className:"results_header results_header"},"Showing ",l({},r(e,"result","results"))," for \u2018"+o+"\u2019"),s.map(function(e){return function(r,s){return n({className:classNames("results_row available",{selected:s===e.state.selected_search_result}),children:[c({className:"result_page_number"},i(r.pageNum)),t.apply(null,[{href:"javascript:void(0)",onClick:function(t){return t.preventDefault(),e.trigger("toolbar:goto_search_result",s),e.setState({selected_search_result:s})}}].concat(d.call(e.render_snippet(r.snippet,o))))]})}}(this))]})},render_snippet:function(t,e){var n,i,r,o,a,c;if(!e)return t;for(r=RegExp(Scribd.escape_regexp(e),"ig"),i=[],o=0;a=r.exec(t);)s=a.index,n=a[0],s-o>0&&i.push(t.substring(o,s)),i.push(l({},n)),o=s+n.length;return(c=t.substring(o))&&i.push(c),i},render_toc:function(){var e,i;return i=_.string.numberFormat,e=null,n({className:"table_of_contents results_popup",children:[n({className:"toc_header results_header"},"Table of contents"),this.props.document.toolbar.sections.map(function(r){return function(o){return!e&&o.first_page>=r.props.current_page&&(e=o),n({className:classNames("toc_row results_row",{available:o.allowed,current:e===o}),title:o.allowed?void 0:"This section not available in preview",children:[o.first_page?c({className:"result_page_number"},i(o.first_page)):void 0,o.allowed?t({href:"javascript:void(0)",onClick:function(t){return r.trigger("toolbar:goto_page",o.first_page,!0),r.setState({table_of_contents_open:!1}),t.preventDefault()}},o.title):c({className:"disabled_section"},o.title)]})}}(this))]})}})}).call(this);


/* app/views/shared/reading_progress/external_progress_lightbox.coffee @ 1471295863 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.ReadingProgress.ExternalProgressLightbox=function(e){function n(t,e){var i;this.opts=e,this.container=$(t),n.__super__.constructor.apply(this,arguments),this.show(this.progress=null!=(i=Scribd.current_doc)?i.reading_progress:void 0),$(window).on("scribd:external_reading_progress",function(t){return function(e,n){return t.show(n)}}(this))}return t(n,e),n.should_be_shown=function(t){return(null!=t?t.offset:void 0)?t.from_current_device?!1:"browser"===t.device_name?!1:!0:!1},n.prototype.show=function(t){var e;return this.progress=t,Scribd.ReadingProgress.ExternalProgressLightbox.should_be_shown(this.progress)?(this.container.find(".device_name").text(this.progress.device_name),n.__super__.show.apply(this,arguments),e=Scribd.current_doc.is_comic?"comic":Scribd.current_doc.is_sheet_music?"sheet music":"book",this.container.track_rats("reading_progress:progress_moved:show",{doc_id:Scribd.current_doc.id,destination_offset:this.progress.offset,offset_type:this.progress.offset_type,document_type:e})):void 0},n}(Scribd.StackedLightbox)}).call(this);


/* app/views/shared/reading_progress/past_preview_lightbox.coffee @ 1471295863 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.ReadingProgress.PastPreviewLightbox=function(e){function n(t,e){this.opts=null!=e?e:{},this.container=$(t),n.__super__.constructor.apply(this,arguments),this.show(),this.container.dispatch("click",{restart_preview:function(t){return function(){return null!=Scribd.read_page?Scribd.read_page.goto_progress({offset_type:"character",offset:0}):"undefined"!=typeof docManager&&null!==docManager&&docManager.gotoPage(1),t.close(!0)}}(this),get_full_title:function(t){return function(){return t.close(!0),"continue"}}(this)})}return t(n,e),n.should_be_shown=function(){var t;return t=!0,function(){var e,n;return t&&Scribd.logged_in?(t=!1,e=(null!=(n=Scribd.current_doc.reading_progress)?n.offset:void 0)||0,null!=Scribd.read_page?Scribd.read_page.epub.isProgressBeyondBounds(null,e):"undefined"!=typeof docManager&&null!==docManager?e+1>docManager._maximumAllowedPage:void 0):!1}}(),n.prototype.show=function(){var t;if(Scribd.ReadingProgress.PastPreviewLightbox.should_be_shown()&&this.opts.credit_restricted)return n.__super__.show.apply(this,arguments),t=Scribd.current_doc.is_comic?"comic":Scribd.current_doc.is_sheet_music?"sheet music":"book",this.container.track_rats("reading_progress:progress_moved:show",{doc_id:Scribd.current_doc.id,desired_offset:Scribd.current_doc.reading_progress.offset,offset_type:Scribd.current_doc.reading_progress.offset_type,document_type:t,is_preview:!0})},n.prototype.close=function(t){return null==t&&(t=!1),t?n.__super__.close.apply(this,arguments):void 0},n}(Scribd.StackedLightbox)}).call(this);


/* :class_inlines, 'spec_javascripts/js_spec', ... @ (none) */
